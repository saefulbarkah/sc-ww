
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AudioFilterController=void 0;const Log_1=require("../Common/Log"),PriorityQueue_1=require("../Container/PriorityQueue"),AudioSystem_1=require("./AudioSystem");class AudioFilterState{constructor(t,e){this.State="none",this.Priority=0,this.State=t,this.Priority=e??0}}AudioFilterState.Compare=(t,e)=>{let i=e.Priority-t.Priority;return 0===i&&i--,i};class AudioFilterController{static get u$_(){return this.d$_||(this.d$_=new Map([["none",this.m$_],["ui_default",new AudioFilterState("ui_default")]])),this.d$_}static set zyi(t){if(this.f$_!==t){if(this.f$_.State!==t.State){if(!t.State)return void(Log_1.Log.CheckError()&&Log_1.Log.Error("Audio",42,"[FilterState] [SetCurrent] 传入异常的State",["State",t.State]));AudioSystem_1.AudioSystem.SetState("filter",t.State),Log_1.Log.CheckDebug()&&Log_1.Log.Debug("Audio",42,"[FilterState] [SetCurrent]",["State",t.State])}this.f$_=t}}static get zyi(){return this.f$_}static g$_(){this.C$_.Empty||"none"===this.C$_.Top.State?this.p$_.Empty?this.zyi=AudioFilterController.m$_:this.zyi=this.p$_.Top:this.zyi=this.C$_.Top}static PushFilterState(t,e,i="",r=0){var o;return e.Empty||this.zyi.State!==t||e.Top!==this.zyi?(r=AudioFilterController.CreateFilterState(t,r),o=this._A++,Log_1.Log.CheckDebug()&&Log_1.Log.Debug("Audio",42,"[FilterState] [Push]",["uid",o],["State",r],["Context",i]),e.Push(r),this.v$_.set(o,r),this.g$_(),o):(Log_1.Log.CheckDebug()&&Log_1.Log.Debug("Audio",42,"[FilterState] [Push] 当前状态和需要入栈状态一致，跳过push",["State",t],["Context",i]),0)}static RemoveFilterState(t,e,i){var r;t<=0?Log_1.Log.CheckWarn()&&Log_1.Log.Warn("Audio",42,"[FilterState] [Remove] uid不大于零,跳过",["Context",i]):(r=this.v$_.get(t),Log_1.Log.CheckDebug()&&Log_1.Log.Debug("Audio",42,"[FilterState] [Remove]",["uid",t],["State",r],["Context",i]),r?(e.Remove(r),this.v$_.delete(t),this.g$_()):Log_1.Log.CheckError()&&Log_1.Log.Error("Audio",42,"[FilterState] [Remove] 传入异常的uid",["uid",t]))}static PushUiFilterState(t,e){return this.PushFilterState(t,this.C$_,"[UI] "+e)}static RemoveUiFilterState(t,e){this.RemoveFilterState(t,this.C$_,"[UI] "+e)}static PushSceneFilterState(t,e,i=0){return this.PushFilterState(t,this.p$_,"[Scene]"+e,i)}static RemoveSceneFilterState(t,e){this.RemoveFilterState(t,this.C$_,"[Scene] "+e)}static CreateFilterState(t,e){return t?!e&&this.u$_.has(t)?this.u$_.get(t):new AudioFilterState(t,e):(Log_1.Log.CheckError()&&Log_1.Log.Error("Audio",42,"[FilterState] [Create] 传入异常的State",["State",t],["priority",e]),this.m$_)}}(exports.AudioFilterController=AudioFilterController)._A=0,AudioFilterController.v$_=new Map,AudioFilterController.C$_=new PriorityQueue_1.PriorityQueue(AudioFilterState.Compare),AudioFilterController.p$_=new PriorityQueue_1.PriorityQueue(AudioFilterState.Compare),AudioFilterController.m$_=new AudioFilterState("none"),AudioFilterController.d$_=void 0,AudioFilterController.f$_=AudioFilterController.m$_;
//# sourceMappingURL=AudioFilterController.js.map