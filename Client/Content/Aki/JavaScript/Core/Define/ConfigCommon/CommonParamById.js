
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.configCommonParamById=void 0;const Stats_1=require("../../Common/Stats"),ConfigCommon_1=require("../../Config/ConfigCommon"),DeserializeConfig_1=require("../../Config/DeserializeConfig"),FILE="c.参数.xlsx",DB="db_common_param.db",TABLE="CommonParam",COMMAND="select BinData from `CommonParam` where KeyName = ?",logPair=[["数据库",DB],["文件",FILE],["表名",TABLE],["语句",COMMAND]];let handleId=0;const intCache=new Map,floatCache=new Map,long54Cache=new Map,boolCache=new Map,stringCache=new Map,intListCache=new Map,floatListCache=new Map,long54ListCache=new Map;function getDataView(a){var o,t;return(o=ConfigCommon_1.ConfigCommon.CheckStatement(handleId,["command",COMMAND]))?(o=(o=ConfigCommon_1.ConfigCommon.BindString(handleId,1,a,...logPair,["Id",a]))&&0<ConfigCommon_1.ConfigCommon.Step(handleId,!0,...logPair,["Id",a]))?(t=void 0,[o,t]=ConfigCommon_1.ConfigCommon.GetValue(handleId,0,...logPair,["Id",a]),ConfigCommon_1.ConfigCommon.Reset(handleId),[o,t]):(ConfigCommon_1.ConfigCommon.Reset(handleId),[!1,void 0]):[!1,void 0]}const initStat=Stats_1.Stat.CreateNoFlameGraph("configCommonParamById.Init"),getIntConfigStat=Stats_1.Stat.CreateNoFlameGraph("configCommonParamById.GetIntConfig"),INT_STAT_PREFIX="configCommonParamById.GetIntConfig(",getFloatConfigStat=Stats_1.Stat.CreateNoFlameGraph("configCommonParamById.GetFloatConfig"),FLOAT_STAT_PREFIX="configCommonParamById.GetFloatConfig(",getLong54ConfigStat=Stats_1.Stat.CreateNoFlameGraph("configCommonParamById.GetLong54Config"),LONG54_STAT_PREFIX="configCommonParamById.GetLong54Config(",getBoolConfigStat=Stats_1.Stat.CreateNoFlameGraph("configCommonParamById.GetBoolConfig"),BOOL_STAT_PREFIX="configCommonParamById.GetBoolConfig(",getStringConfigStat=Stats_1.Stat.CreateNoFlameGraph("configCommonParamById.GetStringConfig"),STRING_STAT_PREFIX="configCommonParamById.GetStringConfig(",getIntArrayConfigStat=Stats_1.Stat.CreateNoFlameGraph("configCommonParamById.GetIntArrayConfig"),INT_ARRAY_STAT_PREFIX="configCommonParamById.GetIntArrayConfig(",getFloatArrayConfigStat=Stats_1.Stat.CreateNoFlameGraph("configCommonParamById.GetFloatArrayConfig"),FLOAT_ARRAY_STAT_PREFIX="configCommonParamById.GetFloatArrayConfig(",getLong54ArrayConfigStat=Stats_1.Stat.CreateNoFlameGraph("configCommonParamById.GetLong54ArrayConfig"),LONG54_ARRAY_STAT_PREFIX="configCommonParamById.GetLong54ArrayConfig(";exports.configCommonParamById={Init:()=>{handleId=ConfigCommon_1.ConfigCommon.InitDataStatement(handleId,DB,COMMAND)},GetIntConfig:a=>{Stats_1.Stat.CreateNoFlameGraph(""+INT_STAT_PREFIX+a+")");var o=intCache.get(a);if(o)return o;var[o,t]=getDataView(a);if(o){o=DeserializeConfig_1.DeserializeConfig.ParseInt(t,0,...logPair,["Id",a]);if(o.Success)return intCache.set(a,o.Value),o.Value}},GetFloatConfig:a=>{Stats_1.Stat.CreateNoFlameGraph(""+FLOAT_STAT_PREFIX+a+")");var o=floatCache.get(a);if(o)return o;var[o,t]=getDataView(a);if(o){o=DeserializeConfig_1.DeserializeConfig.ParseFloat(t,0,...logPair,["Id",a]);if(o.Success)return floatCache.set(a,o.Value),o.Value}},GetLong54Config:a=>{Stats_1.Stat.CreateNoFlameGraph(""+LONG54_STAT_PREFIX+a+")");var o=long54Cache.get(a);if(o)return o;var[o,t]=getDataView(a);if(o){o=DeserializeConfig_1.DeserializeConfig.ParseFloat64(t,0,...logPair,["Id",a]);if(o.Success)return long54Cache.set(a,o.Value),o.Value}},GetBoolConfig:a=>{Stats_1.Stat.CreateNoFlameGraph(""+BOOL_STAT_PREFIX+a+")");var o=boolCache.get(a);if(o)return o;var[o,t]=getDataView(a);if(o){o=DeserializeConfig_1.DeserializeConfig.ParseBoolean(t,0,...logPair,["Id",a]);if(o.Success)return boolCache.set(a,o.Value),o.Value}},GetStringConfig:a=>{Stats_1.Stat.CreateNoFlameGraph(""+STRING_STAT_PREFIX+a+")");var o=stringCache.get(a);if(o)return o;var[o,t]=getDataView(a);if(o){o=DeserializeConfig_1.DeserializeConfig.ParseString(t,0,...logPair,["Id",a]);if(o.Success)return stringCache.set(a,o.Value),o.Value}},GetIntArrayConfig:t=>{Stats_1.Stat.CreateNoFlameGraph(""+INT_ARRAY_STAT_PREFIX+t+")");if(i=intListCache.get(t))return i;var[a,n]=getDataView(t);if(a){var i=new Array,e=DeserializeConfig_1.DeserializeConfig.ParseInt(n,0,...logPair,["Id",t]);if(e.Success){let o=e.Position;for(let a=0;a<e.Value;a++){var r=DeserializeConfig_1.DeserializeConfig.ParseInt(n,o,...logPair,["Id",t]);if(!r.Success)return;o=r.Position,i.push(r.Value)}return intListCache.set(t,i),i}}},GetFloatArrayConfig:t=>{Stats_1.Stat.CreateNoFlameGraph(""+FLOAT_ARRAY_STAT_PREFIX+t+")");if(i=floatListCache.get(t))return i;var[a,n]=getDataView(t);if(a){var i=new Array,e=DeserializeConfig_1.DeserializeConfig.ParseInt(n,0,...logPair,["Id",t]);if(e.Success){let o=e.Position;for(let a=0;a<e.Value;a++){var r=DeserializeConfig_1.DeserializeConfig.ParseFloat(n,o,...logPair,["Id",t]);if(!r.Success)return;o=r.Position,i.push(r.Value)}return floatListCache.set(t,i),i}}},GetLong54ArrayConfig:t=>{Stats_1.Stat.CreateNoFlameGraph(""+LONG54_ARRAY_STAT_PREFIX+t+")");if(i=long54ListCache.get(t))return i;var[a,n]=getDataView(t);if(a){var i=new Array,e=DeserializeConfig_1.DeserializeConfig.ParseInt(n,0,...logPair,["Id",t]);if(e.Success){let o=e.Position;for(let a=0;a<e.Value;a++){var r=DeserializeConfig_1.DeserializeConfig.ParseFloat64(n,o,...logPair,["Id",t]);if(!r.Success)return;o=r.Position,i.push(r.Value)}return long54ListCache.set(t,i),i}}}};
//# sourceMappingURL=CommonParamById.js.map