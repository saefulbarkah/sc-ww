
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.configCommonParamLang=void 0;const LanguageSystem_1=require("../../Common/LanguageSystem"),Stats_1=require("../../Common/Stats"),ConfigCommon_1=require("../../Config/ConfigCommon"),DeserializeConfig_1=require("../../Config/DeserializeConfig"),DB="lang_common_param.db",TABLE="CommonParam",COMMAND="select content from `CommonParam` where id = ?",logPair=[["数据库",DB],["表名",TABLE],["语句",COMMAND]],langCache=new Map,initStat=Stats_1.Stat.CreateNoFlameGraph("configCommonParamLang.Init"),getLocalTextStat=Stats_1.Stat.CreateNoFlameGraph("configCommonParamLang.GetLocalText"),LOCAL_TEXT_STAT_PREFIX="configCommonParamLang.GetLocalText(";exports.configCommonParamLang={Init:()=>{ConfigCommon_1.ConfigCommon.GetLangStatementId(TABLE,DB,COMMAND)},GetLocalText:(o,a=void 0)=>{Stats_1.Stat.CreateNoFlameGraph(""+LOCAL_TEXT_STAT_PREFIX+o+`, ${a})`);if(LanguageSystem_1.LanguageSystem.GmShowLanguageKey)return`CommonParam|${o}|`+LanguageSystem_1.LanguageSystem.GetCultureOrDefault(a);let n=langCache.get(o);n||(n=new Map,langCache.set(o,n));var e=LanguageSystem_1.LanguageSystem.GetCultureOrDefault(a),m=n.get(e);if(m)return m;var i=ConfigCommon_1.ConfigCommon.GetLangStatementId(TABLE,DB,COMMAND,a);if(C=ConfigCommon_1.ConfigCommon.CheckStatement(i)){if(C=(C=ConfigCommon_1.ConfigCommon.BindInt(i,1,o,...logPair,["Id",o]))&&0<ConfigCommon_1.ConfigCommon.Step(i,!0,...logPair,["传入语言",a],["查询语言",e],["文本Id",o])){var t=void 0;if([C,t]=ConfigCommon_1.ConfigCommon.GetValue(i,0,...logPair,["传入语言",a],["查询语言",e],["文本Id",o]),C){var C=DeserializeConfig_1.DeserializeConfig.ParseString(t,0,...logPair,["传入语言",a],["查询语言",e],["文本Id",o]);if(C.Success)return m=C.Value,n.set(e,m),ConfigCommon_1.ConfigCommon.Reset(i),m}}ConfigCommon_1.ConfigCommon.Reset(i)}}};
//# sourceMappingURL=CommonParamLang.js.map