
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ComponentForceTickController=void 0;const Log_1=require("../../../Core/Common/Log"),Stats_1=require("../../../Core/Common/Stats"),Core_1=require("../../../Core/Core"),RegisterComponent_1=require("../../../Core/Entity/RegisterComponent"),ControllerBase_1=require("../../../Core/Framework/ControllerBase");class ComponentForceTickController extends ControllerBase_1.ControllerBase{static OnInit(){return this.S0r=[128],this.y0r=[47,61,128,98,145,147,138,136,140,148,206],this.I0r=[57,61,147],!0}static RegisterPreMoveTick(o,r){this.T0r(o)?this.Hh1.has(o)?Log_1.Log.CheckWarn()&&Log_1.Log.Warn("TickController",35,"[ComponentForceTickController.RegisterPreMoveTick] 当前Comp已经注册过ForceTick",["Comp",o.toString()]):this.Hh1.set(o,r):Log_1.Log.CheckError()&&Log_1.Log.Error("TickController",35,"[ComponentForceTickController.RegisterPreMoveTick] 当前Comp不允许注册到ForceTickController",["Comp",o.toString()])}static RegisterPreTick(o,r){this.T0r(o)?Core_1.Core.RegisterPreTick(r):Log_1.Log.CheckError()&&Log_1.Log.Error("TickController",31,"[ComponentForceTickController.RegisterTick] 当前Comp不允许注册到ForceTickController",["Comp",o.toString()])}static UnregisterPreTick(o){Core_1.Core.UnRegisterPreTick(o)}static RegisterTick(o,r){this.L0r(o)?this.D0r.has(o)?Log_1.Log.CheckWarn()&&Log_1.Log.Warn("TickController",31,"[ComponentForceTickController.RegisterTick] 当前Comp已经注册过ForceTick",["Comp",o.toString()]):this.D0r.set(o,r):Log_1.Log.CheckError()&&Log_1.Log.Error("TickController",31,"[ComponentForceTickController.RegisterTick] 当前Comp不允许注册到ForceTickController",["Comp",o.toString()])}static RegisterAfterTick(o,r){this.R0r(o)?this._It.has(o)?Log_1.Log.CheckWarn()&&Log_1.Log.Warn("TickController",31,"[ComponentForceTickController.RegisterAfterTick] 当前Comp已经注册过ForceAfterTick",["Comp",o.toString()]):this._It.set(o,r):Log_1.Log.CheckError()&&Log_1.Log.Error("TickController",31,"[ComponentForceTickController.RegisterAfterTick] 当前Comp不允许注册到ForceTickController",["Comp",o.toString()])}static UnregisterPreMoveTick(o){this.Hh1.has(o)?this.Hh1.delete(o):Log_1.Log.CheckWarn()&&Log_1.Log.Warn("TickController",35,"[ComponentForceTickController.UnregisterPreTick] 当前Comp未注册过",["Comp",o.toString()])}static UnregisterTick(o){this.D0r.has(o)?this.D0r.delete(o):Log_1.Log.CheckWarn()&&Log_1.Log.Warn("TickController",31,"[ComponentForceTickController.UnregisterTick] 当前Comp未注册过ForceTick",["Comp",o.toString()])}static UnregisterAfterTick(o){this._It.has(o)?this._It.delete(o):Log_1.Log.CheckWarn()&&Log_1.Log.Warn("TickController",31,"[ComponentForceTickController.UnregisterAfterTick] 当前Comp未注册过ForceAfterTick",["Comp",o.toString()])}static PreMoveTick(o){for(var[r,e]of this.Hh1)if(r.Active)try{this.m6(this.$h1,r.constructor.name,"ComponentForceTickController.PreMoveTick");e(o*this.SW)}catch(o){o instanceof Error?Log_1.Log.CheckError()&&Log_1.Log.ErrorWithStack("TickController",35,"处理方法执行异常",o,["comp",r.toString()],["error",o.message]):Log_1.Log.CheckError()&&Log_1.Log.Error("TickController",35,"处理方法执行异常",["comp",r.toString()],["error",o])}}static OnTick(o){for(var[r,e]of this.D0r)if(r.Active)try{this.m6(this.U0r,r.constructor.name,"ComponentForceTickController.OnTick.");e(o*this.SW)}catch(o){o instanceof Error?Log_1.Log.CheckError()&&Log_1.Log.ErrorWithStack("TickController",31,"处理方法执行异常",o,["comp",r.toString()],["error",o.message]):Log_1.Log.CheckError()&&Log_1.Log.Error("TickController",31,"处理方法执行异常",["comp",r.toString()],["error",o])}}static OnAfterTick(o){for(var[r,e]of this._It)try{r.Active&&(this.m6(this.A0r,r.constructor.name,"ComponentForceTickController.OnAfterTick."),e(o*this.SW))}catch(o){o instanceof Error?Log_1.Log.CheckError()&&Log_1.Log.ErrorWithStack("TickController",31,"处理方法执行异常",o,["comp",r.toString()],["error",o.message]):Log_1.Log.CheckError()&&Log_1.Log.Error("TickController",31,"处理方法执行异常",["comp",r.toString()],["error",o])}}static T0r(r){return Boolean(this.S0r.find(o=>(0,RegisterComponent_1.isComponentInstance)(r,o)))}static L0r(r){return Boolean(this.y0r.find(o=>(0,RegisterComponent_1.isComponentInstance)(r,o)))}static R0r(r){return Boolean(this.I0r.find(o=>(0,RegisterComponent_1.isComponentInstance)(r,o)))}static m6(r,e,t){if(Stats_1.Stat.Enable){let o=r.get(e);return o||(o=Stats_1.Stat.CreateNoFlameGraph(t+e),r.set(e,o)),o}}static SetTimeDilation(o){ComponentForceTickController.SW=o}}(exports.ComponentForceTickController=ComponentForceTickController).y0r=[],ComponentForceTickController.I0r=[],ComponentForceTickController.S0r=[],ComponentForceTickController.$h1=new Map,ComponentForceTickController.U0r=new Map,ComponentForceTickController.A0r=new Map,ComponentForceTickController.SW=1,ComponentForceTickController.Hh1=new Map,ComponentForceTickController.D0r=new Map,ComponentForceTickController._It=new Map;
//# sourceMappingURL=ComponentForceTickController.js.map