
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const puerts_1=require("puerts"),UE=require("ue"),Log_1=require("../../Core/Common/Log"),Macro_1=require("../../Core/Preprocessor/Macro"),FNameUtil_1=require("../../Core/Utils/FNameUtil"),Quat_1=require("../../Core/Utils/Math/Quat"),Rotator_1=require("../../Core/Utils/Math/Rotator"),Vector_1=require("../../Core/Utils/Math/Vector"),Global_1=require("../Global"),ModelManager_1=require("../Manager/ModelManager"),UiCameraAnimationManager_1=require("../Module/UiCameraAnimation/UiCameraAnimationManager"),CameraController_1=require("./CameraController"),CameraUtility_1=require("./CameraUtility");class CameraBlueprintFunctionLibrary extends UE.BlueprintFunctionLibrary{Constructor(){}static get TmpVector(){return this.TmpVectorInternal||(this.TmpVectorInternal=Vector_1.Vector.Create()),this.TmpVectorInternal}static get TmpQuat(){return this.TmpQuatInternal||(this.TmpQuatInternal=Quat_1.Quat.Create()),this.TmpQuatInternal}static OnPossess(a){CameraController_1.CameraController.OnPossess(a)}static GetCameraMode(){return CameraController_1.CameraController.Model.CameraMode}static GetSequenceCameraActor(){return CameraController_1.CameraController.Model.SequenceCamera.PlayerComponent.GetCurrentLevelSequenceActor()}static EnterCameraMode(a,e,r,t){CameraController_1.CameraController.EnterCameraMode(a,e,r,t)}static ExitCameraMode(a,e,r,t){CameraController_1.CameraController.ExitCameraMode(a,e,r,t)}static SetCameraRotation(a){CameraController_1.CameraController.FightCamera.LogicComponent.SetRotation(a)}static IsTargetSocketLocationValid(){return CameraController_1.CameraController.FightCamera.LogicComponent.IsTargetLocationValid}static GetTargetSocketLocation(){return CameraController_1.CameraController.FightCamera.LogicComponent.TargetLocation.ToUeVector()}static GetFightCameraLocation(){return CameraController_1.CameraController.FightCamera.LogicComponent.CameraLocation.ToUeVector()}static GetFightCameraRotation(){return CameraController_1.CameraController.FightCamera.LogicComponent.CameraRotation.ToUeRotator()}static GetFightCameraActor(){return CameraController_1.CameraController.FightCamera.LogicComponent.CameraActor}static SetFightCameraFollow(a){CameraController_1.CameraController.FightCamera.LogicComponent.IsFollowing=a}static ApplyCameraModify(a,e,r,t,i,o,l,n,C,m,s,c,u){CameraUtility_1.CameraUtility.CheckApplyCameraModifyCondition(ModelManager_1.ModelManager.CreatureModel.GetEntityById(s),o,c,(0,puerts_1.$unref)(u))&&CameraController_1.CameraController.FightCamera.LogicComponent.ApplyCameraModify(a,e,r,t,o,l,i,n,C,void 0,m)}static ApplyCameraGuide(a,e,r,t,i,o,l){this.CacheLookAtVector||(this.CacheLookAtVector=Vector_1.Vector.Create()),this.CacheLookAtVector.FromUeVector(a),CameraController_1.CameraController.FightCamera.LogicComponent.ApplyCameraGuide(this.CacheLookAtVector,e,r,t,i,o,l)}static EnterCameraExplore(a,e,r,t,i,o,l){e=UE.KismetMathLibrary.Conv_VectorToVectorDouble(e),r=UE.KismetMathLibrary.Conv_VectorToVectorDouble(r);CameraController_1.CameraController.FightCamera.LogicComponent.EnterCameraExplore(a,e,r,t,i,o,l)}static ExitCameraExplore(a){CameraController_1.CameraController.FightCamera.LogicComponent.ExitCameraExplore(a)}static PlayCameraSequence(a,e,r,t,i,o,l,n,C,m,s,c,u,_){var e=ModelManager_1.ModelManager.CreatureModel.GetEntityById(e);return!!e&&!!(e=e.Entity?.GetComponent(3)?.Actor)&&!!CameraUtility_1.CameraUtility.CheckCameraSequenceCondition(e,a)&&CameraController_1.CameraController.SequenceCamera.PlayerComponent.PlayCameraSequence(r,t,i,e,FNameUtil_1.FNameUtil.GetDynamicFName(o),FNameUtil_1.FNameUtil.GetDynamicFName(l),n,C,m,s,c,u,_)}static GetWidgetCameraActor(){return CameraController_1.CameraController.WidgetCamera.DisplayComponent.CineCamera}static SetWidgetCameraBlendParams(a,e,r,t,i,o,l,n,C,m,s){l=UE.KismetMathLibrary.Conv_VectorToVectorDouble(l);CameraController_1.CameraController.WidgetCamera.BlendComponent.SetBlendParams(a,e,r,t,i,o,l,n,C,m,s)}static PlayCameraOrbital(a,e,r,t,i){CameraController_1.CameraController.OrbitalCamera.PlayerComponent.PlayCameraOrbital(a,e,r,t,i)}static StopCameraOrbital(){CameraController_1.CameraController.OrbitalCamera.PlayerComponent.StopCameraOrbital()}static ResetFightCameraPitchAndArmLength(){CameraController_1.CameraController.FightCamera.LogicComponent.ResetArmLengthAndRotation(Rotator_1.Rotator.ZeroRotator)}static EnterSequenceDialogue(a){CameraController_1.CameraController.FightCamera.LogicComponent.CameraDialogueController.EnterSequenceDialogue(Vector_1.Vector.Create(a.D_K2_GetActorLocation()))}static ExitSequenceDialogue(){CameraController_1.CameraController.FightCamera.LogicComponent.CameraDialogueController.ExitSequenceDialogue()}static ReloadCameraConfig(){CameraController_1.CameraController.FightCamera.LogicComponent.LoadConfig(),CameraController_1.CameraController.FightCamera.LogicComponent.CameraConfigController.LoadConfig()}static SetAimAssistMode(a){ModelManager_1.ModelManager.CameraModel.SetAimAssistMode(a)}static IsRoleOnCameraRight(){var a=Global_1.Global.BaseCharacter.GetEntityNoBlueprint().GetComponent(1),e=ModelManager_1.ModelManager.CameraModel.FightCamera.LogicComponent;return e.CameraRotation.Quaternion(CameraBlueprintFunctionLibrary.TmpQuat),CameraBlueprintFunctionLibrary.TmpQuat.RotateVector(Vector_1.Vector.RightVectorProxy,CameraBlueprintFunctionLibrary.TmpVector),0<a.ActorLocationProxy.DotProduct(CameraBlueprintFunctionLibrary.TmpVector)-e.CameraLocation.DotProduct(CameraBlueprintFunctionLibrary.TmpVector)}static GetIsCameraTargetInScreen(){var a=ModelManager_1.ModelManager?.CameraModel?.FightCamera?.LogicComponent;return!!a?.IsTargetLocationValid&&a.CheckPositionInScreen(a.TargetLocation,a.CameraAdjustController.CheckInScreenMinX,a.CameraAdjustController.CheckInScreenMaxX,a.CameraAdjustController.CheckInScreenMinY,a.CameraAdjustController.CheckInScreenMaxY)}static EnterSpecialGameplayCamera(a){var e=ModelManager_1.ModelManager?.CameraModel?.FightCamera?.LogicComponent;if(e)return e.EnterSpecialGameplayCamera(a)}static ExitSpecialGameplayCamera(){var a=ModelManager_1.ModelManager?.CameraModel?.FightCamera?.LogicComponent;a&&a.ExitSpecialGameplayCamera()}static ExitSpecialGameplayCamera2(){var a=ModelManager_1.ModelManager?.CameraModel?.FightCamera?.LogicComponent;a&&a.ExitSpecialGameplayCamera()}static SetAimAssistModeByKey(a,e){ModelManager_1.ModelManager.CameraModel?.SetAimAssistModeWithKey(a,e)}static ClearAimAssistModeByKey(a){ModelManager_1.ModelManager.CameraModel?.ClearAimAssistModeWithKey(a)}static SetSequenceCameraCollisionState(a){var e=ModelManager_1.ModelManager?.CameraModel?.SequenceCamera?.PlayerComponent;e&&e.SetCameraCollisionState(a)}static SetXRayState(a){var e=CameraController_1.CameraController.FightCamera?.LogicComponent?.CameraCollision;e&&(e.IsPlayerXRayEnable=a,Log_1.Log.CheckInfo())&&Log_1.Log.Info("Camera",57,"CameraBlueprintFunctionLibrary SetXRayState",["isEnable",a])}}CameraBlueprintFunctionLibrary.CacheLookAtVector=void 0,CameraBlueprintFunctionLibrary.TmpVectorInternal=void 0,CameraBlueprintFunctionLibrary.TmpQuatInternal=void 0,exports.default=CameraBlueprintFunctionLibrary;
//# sourceMappingURL=CameraBlueprintFunctionLibrary.js.map