
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.InputModel=void 0;const ModelBase_1=require("../../Core/Framework/ModelBase"),Switcher_1=require("../Utils/Switcher"),InputLayer_1=require("./InputLayer");class InputModel extends ModelBase_1.ModelBase{constructor(){super(...arguments),this.jMe=new Map([[2,0],[3,0],[4,0],[5,0],[6,0],[7,0],[8,0],[9,0],[10,0]]),this.WMe=new Array,this.KMe=new Map,this.QMe=new Map,this.whh=new Map,this.OnlyMoveForward=new Switcher_1.Switcher(!1),this.IsOpenInputAxisLog=!1,this.eKa=!1}GetHandlers(){return this.WMe}GetPressTimes(){return this.KMe}GetPressTimesByInputAction(e){return this.KMe.get(e)??0}GetAxisValues(){return this.QMe}get LastClearAxisValue(){return this.eKa}ResetLastTemporaryClearAxisValues(){this.eKa=!1}TemporaryClearAxisValues(){this.eKa=!0,this.QMe.clear()}NextFrameRefreshAxisValues(){this.eKa=!0}QueryCommandPriority(e){return this.jMe.get(e)}AddInputHandler(e){this.WMe.includes(e)||(this.WMe.push(e),this.WMe.sort((e,t)=>t.GetPriority()-e.GetPriority()))}IsAxisBlock(e){for(const t of this.WMe)if(t.GetInputFilter().BlockAxis(e))return!0;return!1}RemoveInputHandler(e){e=this.WMe.indexOf(e);-1!==e&&this.WMe.splice(e,1)}OnClear(){this.WMe.splice(0,this.WMe.length),this.KMe.clear(),this.QMe.clear();for(const e of this.whh.values())e.Clear();return this.whh.clear(),!0}AddInputLayer(e,t){let s=this.whh.get(e);s||(s=new InputLayer_1.InputLayerUnit,this.whh.set(e,s)),s.Add(t)}RemoveInputLayer(e){var t=this.whh.get(e.UnitId);t&&(t.Remove(e),0===t.LayerMap.size)&&this.whh.delete(e.UnitId)}GetInputLayer(e,t){return this.whh.get(e)?.LayerMap.get(t)}GetInputLayers(e){return this.whh.get(e)?.GetLayerList()}}exports.InputModel=InputModel;
//# sourceMappingURL=InputModel.js.map