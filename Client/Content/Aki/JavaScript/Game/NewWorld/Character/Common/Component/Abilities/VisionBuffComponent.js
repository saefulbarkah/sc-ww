
"use strict";var __decorate=this&&this.__decorate||function(e,t,o,s){var r,i=arguments.length,f=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,o):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)f=Reflect.decorate(e,t,o,s);else for(var n=e.length-1;0<=n;n--)(r=e[n])&&(f=(i<3?r(f):3<i?r(t,o,f):r(t,o))||f);return 3<i&&f&&Object.defineProperty(t,o,f),f};Object.defineProperty(exports,"__esModule",{value:!0}),exports.VisionBuffComponent=void 0;const RegisterComponent_1=require("../../../../../../Core/Entity/RegisterComponent"),CombatLog_1=require("../../../../../Utils/CombatLog"),CharacterBuffComponent_1=require("./CharacterBuffComponent");let VisionBuffComponent=class VisionBuffComponent extends CharacterBuffComponent_1.CharacterBuffComponent{constructor(){super(...arguments),this.a2r=void 0}h2r(){var e,t;return void 0!==this.a2r?this.a2r:(t=this.Entity.GetComponent(55)?.GetAttributeHolder())!==this.Entity&&((t=t?.CheckGetComponent(42))&&(e=t.GetVisionId(),t=t.GetVisionData(e),this.a2r=!0===t?.buff是否转移),this.a2r??!1)}AddBuff(e,t){var o;!(this.CreatureDataId===t.InstigatorId)&&this.h2r()?(o=(this.Entity.GetComponent(55)?.GetAttributeHolder())?.GetComponent(169))&&o!==this?o.AddBuff(e,t):CombatLog_1.CombatLog.Error("Buff",this.Entity,"添加幻象buff时无法获取到合法的召唤者",["buffId",e],["reason",t?.Reason]):super.AddBuff(e,t)}RemoveBuff(e,t,o){var s;this.h2r()&&((s=(this.Entity.GetComponent(55)?.GetAttributeHolder())?.GetComponent(169))&&s!==this?s.RemoveBuff(e,t,o):CombatLog_1.CombatLog.Error("Buff",this.Entity,"移除幻象buff时无法获取到合法的召唤者",["buffId",e],["reason",o])),super.RemoveBuff(e,t,o)}};VisionBuffComponent=__decorate([(0,RegisterComponent_1.RegisterComponent)(171)],VisionBuffComponent),exports.VisionBuffComponent=VisionBuffComponent;
//# sourceMappingURL=VisionBuffComponent.js.map