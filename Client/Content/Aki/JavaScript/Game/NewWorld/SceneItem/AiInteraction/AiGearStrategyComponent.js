
"use strict";var AiGearStrategyComponent_1,__decorate=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;0<=a;a--)(i=e[a])&&(s=(o<3?i(s):3<o?i(t,r,s):i(t,r))||s);return 3<o&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AiGearStrategyComponent=void 0;const UE=require("ue"),EntityComponent_1=require("../../../../Core/Entity/EntityComponent"),EntitySystem_1=require("../../../../Core/Entity/EntitySystem"),RegisterComponent_1=require("../../../../Core/Entity/RegisterComponent"),ResourceSystem_1=require("../../../../Core/Resource/ResourceSystem"),LevelGeneralContextDefine_1=require("../../../LevelGamePlay/LevelGeneralContextDefine"),ControllerHolder_1=require("../../../Manager/ControllerHolder"),ModelManager_1=require("../../../Manager/ModelManager");let AiGearStrategyComponent=AiGearStrategyComponent_1=class AiGearStrategyComponent extends EntityComponent_1.EntityComponent{constructor(){super(...arguments),this.A5a=void 0,this.D5a=0,this.R5a="",this.U5a=void 0}OnInitData(e){e=e.GetParam(AiGearStrategyComponent_1)[0];if(e){var t=e.StrategyType.Chessboard;if(!t)return!1;this.D5a=t,this.R5a=e.StrategyType.CommonConfig,this.U5a=e.StrategyType.Condition}return!0}OnStart(){return!0}OnActivate(){var e=ModelManager_1.ModelManager.CreatureModel.GetEntityByPbDataId(this.D5a);e?.IsInit&&this.x5a(e)}x5a(e){this.A5a=EntitySystem_1.EntitySystem.GetComponent(e.Id,124),this.A5a&&ResourceSystem_1.ResourceSystem.LoadAsync(this.R5a,UE.BP_AIGearStrategy_C,e=>{this.A5a?.RegisterAiInfo(e)})}CheckAiCondition(){return!this.U5a||ControllerHolder_1.ControllerHolder.LevelGeneralController.CheckConditionNew(this.U5a,void 0,LevelGeneralContextDefine_1.EntityContext.Create(this.Entity.Id))}Tick(e){if(0!==this.D5a&&!this.A5a){var t=ModelManager_1.ModelManager.CreatureModel?.GetEntityByPbDataId(this.D5a);if(!t?.Valid||!t.Entity||!t.IsInit)return;this.x5a(t)}this.A5a?.RefreshAiEnable(this.CheckAiCondition())}};AiGearStrategyComponent=AiGearStrategyComponent_1=__decorate([(0,RegisterComponent_1.RegisterComponent)(230)],AiGearStrategyComponent),exports.AiGearStrategyComponent=AiGearStrategyComponent;
//# sourceMappingURL=AiGearStrategyComponent.js.map