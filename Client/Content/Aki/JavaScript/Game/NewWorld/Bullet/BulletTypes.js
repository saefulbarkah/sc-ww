
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.KuroHitResultCache=exports.HitInformation=void 0;const UE=require("ue"),Stats_1=require("../../../Core/Common/Stats"),FNameUtil_1=require("../../../Core/Utils/FNameUtil"),Rotator_1=require("../../../Core/Utils/Math/Rotator"),Vector_1=require("../../../Core/Utils/Math/Vector"),CharacterController_1=require("../Character/CharacterController"),BulletDataMain_1=require("./BulletConf/BulletDataMain");class HitInformation{constructor(t,r,i,s,e,h,o,a,n,l,u,c=0n,C,_=-1,m=-1){this.HitPosition=Vector_1.Vector.Create(),this.HitEffectRotation=Rotator_1.Rotator.Create(),this.BulletId=0,this.IsShaking=!1,this.BulletEntityId=0,this.CalculateType=-1,this.DamageId=0n,a?this.HitPosition.FromUeVector(a):this.HitPosition.Reset(),e?this.HitEffectRotation.FromUeRotator(e):this.HitEffectRotation.Reset(),this.Target=r,this.HitPart=o,this.BulletId=s,this.SkillLevel=n,this.Attacker=t,this.IsShaking=h,this.HitEffect=i,this.ReBulletData=l,this.BulletDataPreset=C,this.BulletEntityId=_,this.BulletRowName=u,this.CalculateType=m,this.DamageId=c}static FromUeHitInformation(t){return new HitInformation(CharacterController_1.CharacterController.GetEntityByUeTsBaseCharacter(t.攻击者),CharacterController_1.CharacterController.GetEntityByUeTsBaseCharacter(t.受击者),t.被击效果,t.子弹ID,t.受击特效旋转,t.是否震动,t.受击部位,t.受击位置,t.技能等级,new BulletDataMain_1.BulletDataMain(t.重构子弹数据,""),t.子弹表ID,t.伤害ID,t.子弹逻辑预设,void 0,t.伤害类型)}ToUeHitInformation(){return new UE.SHitInformation(CharacterController_1.CharacterController.GetUeTsBaseCharacterByEntity(this.Attacker),CharacterController_1.CharacterController.GetUeTsBaseCharacterByEntity(this.Target),this.HitEffect,this.BulletId,this.HitPosition.ToUeVectorOld(),this.HitEffectRotation.ToUeRotator(),this.IsShaking,this.HitPart,this.HitPosition.ToUeVectorOld(),this.SkillLevel,this.ReBulletData.Data,this.BulletDataPreset,this.BulletRowName,this.CalculateType,this.DamageId)}}exports.HitInformation=HitInformation;class KuroHitResultCache{constructor(){this.HitCount=0,this.Actors=new Array,this.BoneNameArray=new Array,this.Components=new Array,this.ImpactPointX=new Array,this.ImpactPointY=new Array,this.ImpactPointZ=new Array}Append(t){var r=t.GetHitCount(),i=(this.HitCount+=r,t.Actors),s=t.BoneNameArray,e=t.Components,h=t.ImpactPointX_Array,o=t.ImpactPointY_Array,a=t.ImpactPointZ_Array;for(let t=0;t<r;t++)this.Actors.push(i.Get(t)),this.BoneNameArray.push(FNameUtil_1.FNameUtil.GetDynamicFName(s.Get(t))),this.Components.push(e.Get(t)),this.ImpactPointX.push(h.Get(t)),this.ImpactPointY.push(o.Get(t)),this.ImpactPointZ.push(a.Get(t))}}(exports.KuroHitResultCache=KuroHitResultCache).MHo=Stats_1.Stat.Create("KuroHitResultCache");
//# sourceMappingURL=BulletTypes.js.map