
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.InfoDisplayTypeFourNewView=void 0;const UE=require("ue"),ConfigManager_1=require("../../../Manager/ConfigManager"),ModelManager_1=require("../../../Manager/ModelManager"),UiTickViewBase_1=require("../../../Ui/Base/UiTickViewBase"),InfoDisplayAudioPlayerWithProgress_1=require("./InfoDisplayAudioPlayerWithProgress"),NIAGARA_PARAM_WPO_KEY="WPO",NIAGARA_PARAM_WPO_ACTIVE=3,NIAGARA_PARAM_WPO_INACTIVE=0,NIAGARA_PARAM_DISSOLVE_KEY="Dissolve",NIAGARA_PARAM_DISSOLVE_ACTIVE=1,NIAGARA_PARAM_DISSOLVE_INACTIVE=0,NIAGARA_INTERP_TIME=100;class InfoDisplayTypeFourNewView extends UiTickViewBase_1.UiTickViewBase{constructor(){super(...arguments),this.sai=void 0,this.htc=void 0,this._tc=!1,this.ctc=0,this.utc=!1,this.I5t=()=>{this.dtc()},this.wvo=()=>{this.dtc()},this.mtc=()=>{this.ftc(!0)},this.FIr=()=>{this.ftc(!1)}}OnRegisterComponent(){this.ComponentRegisterInfos=[[0,UE.UIText],[1,UE.UIText],[2,UE.UIItem],[3,UE.UIButtonComponent],[4,UE.UIText],[5,UE.UINiagara],[6,UE.UINiagara]],this.BtnBindInfo=[[3,this.I5t]]}OnStart(){var A=ModelManager_1.ModelManager.InfoDisplayModel.CurrentInformationId();this.sai=new InfoDisplayAudioPlayerWithProgress_1.InfoDisplayAudioPlayerWithProgress,this.htc=this.GetUiNiagara(5),this.SHe(A),this.gtc(A)}OnTick(A){this.sai?.Tick(A),this.Ctc(A)}async gtc(A){A=ConfigManager_1.ConfigManager.InfoDisplayModuleConfig.GetInfoDisplayAudio(A);await this.sai.CreateThenShowByActorAsync(this.GetItem(2).GetOwner()),await this.sai.InitAudioPlayer(A),this.ftc(!0),this.sai.SetOnAudioEnd(this.wvo),this.sai.SetOnPlay(this.mtc),this.sai.SetOnPause(this.FIr)}SHe(A){var i=ConfigManager_1.ConfigManager.InfoDisplayModuleConfig.GetInfoDisplayTitle(A),i=(this.GetText(4).SetText(i),ConfigManager_1.ConfigManager.InfoDisplayModuleConfig.GetInfoDisplayDesc(A));this.GetText(0).SetText(i)}dtc(){this.sai?.Stop(),this.CloseMe()}ftc(A){this._tc=!0,this.ctc=0,this.utc=!A}ptc(A,i){var _;A&&(_=this.utc?NIAGARA_PARAM_WPO_ACTIVE-i*(NIAGARA_PARAM_WPO_ACTIVE-NIAGARA_PARAM_WPO_INACTIVE):NIAGARA_PARAM_WPO_INACTIVE+i*(NIAGARA_PARAM_WPO_ACTIVE-NIAGARA_PARAM_WPO_INACTIVE),A.SetNiagaraVarFloat(NIAGARA_PARAM_WPO_KEY,_),_=this.utc?NIAGARA_PARAM_DISSOLVE_ACTIVE-i*(NIAGARA_PARAM_DISSOLVE_ACTIVE-NIAGARA_PARAM_DISSOLVE_INACTIVE):NIAGARA_PARAM_DISSOLVE_INACTIVE+i*(NIAGARA_PARAM_DISSOLVE_ACTIVE-NIAGARA_PARAM_DISSOLVE_INACTIVE),A.SetNiagaraVarFloat(NIAGARA_PARAM_DISSOLVE_KEY,_))}Ctc(i){if(this._tc){this.ctc+=i;let A=this.ctc/NIAGARA_INTERP_TIME;1<=A&&(this._tc=!1,this.ctc=0,A=1),this.ptc(this.htc,A)}}}exports.InfoDisplayTypeFourNewView=InfoDisplayTypeFourNewView;
//# sourceMappingURL=InfoDisplayTypeFourNewView.js.map