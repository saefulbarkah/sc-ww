
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FunctionItemViewTool=exports.MenuTool=void 0;const UE=require("ue"),Info_1=require("../../../Core/Common/Info"),LanguageSystem_1=require("../../../Core/Common/LanguageSystem"),Log_1=require("../../../Core/Common/Log"),CommonDefine_1=require("../../../Core/Define/CommonDefine"),MathUtils_1=require("../../../Core/Utils/MathUtils"),BaseConfigController_1=require("../../../Launcher/BaseConfig/BaseConfigController"),Platform_1=require("../../../Launcher/Platform/Platform"),GameSettingsDeviceRender_1=require("../../GameSettings/GameSettingsDeviceRender"),CloudGameManager_1=require("../../Manager/CloudGameManager"),ConfigManager_1=require("../../Manager/ConfigManager"),ModelManager_1=require("../../Manager/ModelManager"),MenuDefine_1=require("./MenuDefine");class MenuTool{static CheckPlatform(e){var r=e.Platform;if(MenuTool.IsSimulatedPlatform())return MenuTool.Y0l(e);switch(r){case 1:return Info_1.Info.IsPs5Platform()?0===e.Ps5Hide:Info_1.Info.IsPcPlatform()&&!Platform_1.Platform.IsCloudGame();case 2:return Info_1.Info.IsMobilePlatform()||CloudGameManager_1.CloudGameManager.IsCloudGame;case 3:return Info_1.Info.IsAndroidPlatform();case 4:return Info_1.Info.IsIosPlatform();case 5:return Info_1.Info.IsPs5Platform();default:return!Info_1.Info.IsPs5Platform()||0===e.Ps5Hide}}static IsSimulatedPlatform(){var e=ModelManager_1.ModelManager.MenuModel?.SimulatedPlatform;return-1!==e&&void 0!==e}static Y0l(e){var r=ModelManager_1.ModelManager.MenuModel?.SimulatedPlatform;switch(e.Platform){case 1:return 5===r?0===e.Ps5Hide:1===r;case 2:return 2===r||4===r||3===r;case 3:return 2===r||3===r;case 4:return 2===r||4===r;case 5:return 5===r;default:return 5!==r||0===e.Ps5Hide}}static CheckDeviceVendor(e){var r=GameSettingsDeviceRender_1.GameSettingsDeviceRender.IsDlssGpuDevice(),t=UE.XeSSBlueprintLibrary.IsXeSSSupported(),a=GameSettingsDeviceRender_1.GameSettingsDeviceRender.IsFsrDevice(),n=GameSettingsDeviceRender_1.GameSettingsDeviceRender.IsPWSDKDevice(),o=GameSettingsDeviceRender_1.GameSettingsDeviceRender.IsDlss3GpuDevice(),u=UE.KuroRenderingRuntimeBPPluginBPLibrary.GetRayTracingSupported(),i=UE.KuroRenderingRuntimeBPPluginBPLibrary.GetLumenGISupported(),s=UE.KuroRenderingRuntimeBPPluginBPLibrary.GetRayTracingReflectionsSupported();switch(e){case 81:return r;case 82:return o;case 831:case 84:return r;case 85:return!1;case 87:return a;case 128:return n;case 127:return GameSettingsDeviceRender_1.GameSettingsDeviceRender.IsMetalFxDevice();case 125:case 126:return t;case 58:return!GameSettingsDeviceRender_1.GameSettingsDeviceRender.IsAndroidPlatformScreenBad()&&1!==Info_1.Info.PlatformType;case 76:return UE.KuroAudioStatics.IsDolbyAtmosGameSupported();case 20029:return!1;case 20026:return u&&o;case 20028:return i&&o;case 20027:return s&&o;case 20032:return!1;default:return!0}}static CheckIosReviewShield(e){return!(!ConfigManager_1.ConfigManager.CommonConfig.GetIosReviewShieldMenuArray()?.includes(e)||!BaseConfigController_1.BaseConfigController.GetIosAuditFirstDownloadTip())}static GetLanguageDefineData(){return LanguageSystem_1.LanguageSystem.GetAllLanguageDefines()}static GetAudioCodeById(e){var r=LanguageSystem_1.LanguageSystem.GetLanguageDefineByType(e);return r?r.AudioCode:(Log_1.Log.CheckError()&&Log_1.Log.Error("Menu",30,"LanguageSystem 未定义此语种",["非法值",e]),CommonDefine_1.ENGLISH_ISO639_1)}static GetLanguageCodeById(e){var r=LanguageSystem_1.LanguageSystem.GetLanguageDefineByType(e);return r?r.LanguageCode:(Log_1.Log.CheckError()&&Log_1.Log.Error("Menu",10,"LanguageSystem 未定义此语种",["非法值",e]),CommonDefine_1.ENGLISH_ISO639_1)}static GetLanguageIdByCode(e){var r=LanguageSystem_1.LanguageSystem.GetLanguageDefineByCode(e);return r?r.LanguageType:(Log_1.Log.CheckWarn()&&Log_1.Log.Warn("Menu",10,"LanguageSystem 未定义此语种",["非法值",e]),this.GetLanguageIdByCode(CommonDefine_1.ENGLISH_ISO639_1))}static GetSpeechTypeByLanguageType(e){return LanguageSystem_1.LanguageSystem.GetSpeechTypeByLanguageType(e)}static CheckShowImageSettingInCloudGame(e){return 2!==e.MainType||MenuDefine_1.cloudGameImageShowSettingsSet.has(e.FunctionId)}}exports.MenuTool=MenuTool;class FunctionItemViewTool{static GetSliderPosition(e,r,t=0){var a=e[0],e=e[1],a=MathUtils_1.MathUtils.GetRangePct(a,e,r);return MathUtils_1.MathUtils.GetFloatPointFloor(a*e,t)}static CheckNotice(e){return 0<e.OptionsValueList?.length||0<e.RelationFuncIds.length}}exports.FunctionItemViewTool=FunctionItemViewTool;
//# sourceMappingURL=MenuTool.js.map