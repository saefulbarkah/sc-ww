
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LordGymLordEntranceSelectView=void 0;const UE=require("ue"),LordGymEntranceSetById_1=require("../../../../Core/Define/ConfigQuery/LordGymEntranceSetById"),ControllerHolder_1=require("../../../Manager/ControllerHolder"),ModelManager_1=require("../../../Manager/ModelManager"),UiViewBase_1=require("../../../Ui/Base/UiViewBase"),PopupCaptionItem_1=require("../../../Ui/Common/PopupCaptionItem"),UiManager_1=require("../../../Ui/UiManager"),ButtonItem_1=require("../../Common/Button/ButtonItem"),HelpController_1=require("../../Help/HelpController"),PayShopDefine_1=require("../../PayShop/PayShopDefine"),UiSceneManager_1=require("../../UiComponent/UiSceneManager"),LguiUtil_1=require("../../Util/LguiUtil"),GenericScrollViewNew_1=require("../../Util/ScrollView/GenericScrollViewNew"),LordGymLordEntranceItem_1=require("./LordGymLordEntranceItem");class LordGymLordEntranceSelectView extends UiViewBase_1.UiViewBase{constructor(){super(...arguments),this.lqe=void 0,this.Ybl=void 0,this.jxl=0,this.Wxl=0,this.Qxl=void 0,this.p9t=void 0,this.AMo=()=>{this.CloseMe()},this.dpt=()=>{var e=LordGymEntranceSetById_1.configLordGymEntranceSetById.GetConfig(this.jxl).HelpId;HelpController_1.HelpController.OpenHelpById(e)},this.Kxl=()=>{var e=new LordGymLordEntranceItem_1.LordGymLordEntranceItem;return e.OnToggleClick=this.$xl,e.CanExecuteChangeCallBack=this.Xxl,e},this.$xl=e=>{this.Xxl(e)&&this.SelectLordEntranceByIndex(e)},this.Xxl=e=>e!==this.Ybl.GetGenericLayout().GetSelectedGridIndex(),this.Yxl=()=>{ControllerHolder_1.ControllerHolder.PayShopController.OpenPayShopViewWithTab(5,PayShopDefine_1.NEW_LORD_GYM_TAB_INDEX)},this.xco=()=>{var e={LordEntranceSetId:this.jxl,LordEntranceId:this.Wxl};UiManager_1.UiManager.OpenView("LordGymDifficultySelectView",e)}}OnRegisterComponent(){this.ComponentRegisterInfos=[[0,UE.UIItem],[1,UE.UIScrollViewWithScrollbarComponent],[2,UE.UIItem],[3,UE.UIButtonComponent],[4,UE.UIText],[5,UE.UIButtonComponent]],this.BtnBindInfo=[[3,this.Yxl]]}async OnBeforeStartAsync(){var e=this.OpenParam;if(e){this.jxl=e;e=LordGymEntranceSetById_1.configLordGymEntranceSetById.GetConfig(this.jxl);if(e){this.Qxl=e.LordEntranceList,this.Ybl=new GenericScrollViewNew_1.GenericScrollViewNew(this.GetScrollViewWithScrollbar(1),this.Kxl,this.GetItem(2).GetOwner()),this.lqe=new PopupCaptionItem_1.PopupCaptionItem,this.p9t=new ButtonItem_1.ButtonItem,await Promise.all([this.Ybl?.RefreshByDataAsync(this.Qxl),this.lqe.CreateThenShowByActorAsync(this.GetItem(0).GetOwner()),this.p9t.CreateThenShowByActorAsync(this.GetButton(5).RootUIComp.GetOwner())]),this.p9t.SetFunction(this.xco),this.p9t.SetLocalTextNew("NewChallenge_Start"),this.lqe.SetCloseCallBack(this.AMo),this.lqe.SetTitleByTextIdAndArgNew(e.Title),this.lqe.SetHelpCallBack(this.dpt),this.SelectLordEntranceByIndex(0),this.RefreshLordGymCurrency();var t=ModelManager_1.ModelManager.LordGymModel;for(const i of this.Qxl)t.RecordNewLordGymEntrance(i)}}}OnHandleLoadScene(){ControllerHolder_1.ControllerHolder.LordGymController.CreateLordModelByEntranceId(this.Wxl)}OnHandleReleaseScene(){UiSceneManager_1.UiSceneManager.DestroyLordSkeletalHandle()}SelectLordEntranceByIndex(e){this.Ybl?.GetGenericLayout()?.SelectGridProxy(e),this.Wxl=this.Qxl[e],this.iPl()}iPl(){ControllerHolder_1.ControllerHolder.LordGymController.LoadLordModelByEntranceId(this.Wxl)}RefreshLordGymCurrency(){var e=ModelManager_1.ModelManager.LordGymModel.GetLordGymCurrencyRewardAndTotalCount(this.jxl);LguiUtil_1.LguiUtil.SetLocalTextNew(this.GetText(4),"Text_GymShopNew_Text",e[0],e[1])}}exports.LordGymLordEntranceSelectView=LordGymLordEntranceSelectView;
//# sourceMappingURL=LordGymLordEntranceSelectView.js.map