
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FishingQuestShapePanel=void 0;const UE=require("ue"),ConfigManager_1=require("../../../../../../Manager/ConfigManager"),UiPanelBase_1=require("../../../../../../Ui/Base/UiPanelBase"),LguiUtil_1=require("../../../../../Util/LguiUtil"),FishingDefine_1=require("../../FishingDefine"),FishingQuestShapePanelItem_1=require("./FishingQuestShapePanelItem");class FishingQuestShapePanel extends UiPanelBase_1.UiPanelBase{constructor(){super(...arguments),this.Wc_=0,this.Qc_=0,this.$q_=0,this.Wq_=0,this.Qq_=[]}OnRegisterComponent(){this.ComponentRegisterInfos=[[0,UE.UIItem],[1,UE.UIItem],[2,UE.UITexture],[3,UE.UIItem],[4,UE.UIItem]]}OnStart(){var e=this.GetItem(1);this.Wc_=e.Width,this.Qc_=e.Height,this.$q_=e.GetAnchorOffsetX(),this.Wq_=e.GetAnchorOffsetY(),e.SetUIActive(!1)}RefreshPanel(e,i=!0){var t=ConfigManager_1.ConfigManager.FishingConfig.GetFishingItemConfig(e),s=ConfigManager_1.ConfigManager.FishingConfig.GetFishingShapeConfig(t.Shap).FillState;let h=-1,a=-1,r=-1,n=-1;for(let t=0,e=s.length;t<e;t++)for(let e=0,i=s[t].ArrayInt.length;e<i;e++)1===s[t].ArrayInt[e]&&(h=-1===h?t:Math.min(h,t),a=-1===a?t:Math.max(a,t),r=-1===r?e:Math.min(r,e),n=-1===n?e:Math.max(n,e));e=this.Qq_;for(const f of e)f.SetUiActive(!1);this.Kq_(s,h,r);var l=(n-r+1)*this.Wc_,o=(a-h+1)*this.Qc_,g=this.GetTexture(2),u=(g.SetWidth(l),g.SetHeight(o),this.GetItem(0)),_=(u.SetWidth(l),u.SetHeight(o),t.Sprite);for(const p of e)p.SetGirdSprite(t.Category,_);this.SetTextureByPath(t.Pic,g),this.VA_(i),this.GetItem(3).SetUIActive(!i),this.GetItem(4).useChangeColor=i}VA_(e){e?this.GetTexture(2).SetCustomMaterialScalarParameter(FishingDefine_1.materialProgressName,1):this.GetTexture(2).SetCustomMaterialScalarParameter(FishingDefine_1.materialProgressName,0)}Kq_(s,h,a){let r=0;for(let t=0,e=s.length;t<e;t++)for(let e=0,i=s[t].ArrayInt.length;e<i;e++)1===s[t].ArrayInt[e]&&this.Xq_(r++,t-h,e-a)}Xq_(e,i,t){let s=void 0;t=this.$q_+t*this.Wc_,i=this.Wq_-i*this.Qc_;this.Qq_.length>e?(s=this.Qq_[e]).SetUiActive(!0):(e=LguiUtil_1.LguiUtil.CopyItem(this.GetItem(1),this.GetItem(0)),(s=new FishingQuestShapePanelItem_1.FishingQuestShapePanelItem).CreateThenShowByActorAsync(e.GetOwner()),this.Qq_.push(s)),s.GetRootItem().SetAnchorOffsetX(t),s.GetRootItem().SetAnchorOffsetY(i)}}exports.FishingQuestShapePanel=FishingQuestShapePanel;
//# sourceMappingURL=FishingQuestShapePanel.js.map