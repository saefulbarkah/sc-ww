
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DockyardShopTabViewModel=void 0;const ControllerHolder_1=require("../../../../../../Manager/ControllerHolder"),ModelManager_1=require("../../../../../../Manager/ModelManager"),ScrollingTipsController_1=require("../../../../../ScrollingTips/ScrollingTipsController"),DockyardViewModelBase_1=require("../Base/DockyardViewModelBase"),DockyardShopBackpackPanelModel_1=require("./DockyardShopBackpackPanelModel"),DockyardShopListPanelModel_1=require("./DockyardShopListPanelModel");class DockyardShopTabViewModel extends DockyardViewModelBase_1.DockyardViewModelBase{constructor(){super(...arguments),this.BackpackPanelModel=new DockyardShopBackpackPanelModel_1.DockyardShopBackpackPanelModel,this.ListPanelModel=new DockyardShopListPanelModel_1.DockyardShopListPanelModel,this.uOn=void 0,this.SellClick=(e,o)=>{ControllerHolder_1.ControllerHolder.FishingController.TryRequestFishingSell([e],[o],e=>{e&&(this.ListPanelModel.DeleteSelectedItemBlockAndRefresh(),this.BackpackPanelModel.Panel.DestroySelectItemBlock(),this.uOn.ShowPlotPanel("SellItem"))})}}RegisterMainView(e){this.uOn=e}ItemBlockClick(e){super.ItemBlockClick(e),this.uOn.HidePlotPanel()}AllSellClick(){var e=this.GetLeftPanelItemBlockDataList();const l=this.QYl(e);var e=this.Y8_(e),o=this.BackpackPanelModel.Panel.GetItemBlockDataList();const r=this.QYl(o);o=this.Y8_(o);l.length+r.length===0?ScrollingTipsController_1.ScrollingTipsController.ShowTipsByTextId("Fishing_SellAllFailed"):ControllerHolder_1.ControllerHolder.FishingController.TryRequestFishingSell([...l,...r],[...e,...o],e=>{if(e){0<l.length&&this.ListPanelModel.DeleteItemBlockListFromWareHouse(l);for(const o of r)this.BackpackPanelModel.Panel.DestroyItemBlockById(o);this.uOn.ShowPlotPanel("SellAllItem")}})}NotifyMainViewClose(){this.uOn.CloseMe()}QYl(e){var o=[];for(const l of e)0<l.MBs&&o.push(l.b9n);return o}Y8_(e){var o=[];for(const l of e)0<l.MBs&&o.push(l.L8n);return o}NotifyMainViewUiBlur(e){this.uOn.NotifyUiBlur(e)}get HasFishingCanSell(){var e=this.ListPanelModel.GetShowItemList(),o=ModelManager_1.ModelManager.DockyardModel.GetBackpackItemList(),l=[];for(const r of e)0<r.Price&&l.push(r.IncId);for(const i of o)0<i.Price&&l.push(i.IncId);return 0<l.length}}exports.DockyardShopTabViewModel=DockyardShopTabViewModel;
//# sourceMappingURL=DockyardShopTabViewModel.js.map