
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SolarSpeedResultView=void 0;const UE=require("ue"),Log_1=require("../../../../../../Core/Common/Log"),EventDefine_1=require("../../../../../Common/Event/EventDefine"),EventSystem_1=require("../../../../../Common/Event/EventSystem"),UiPanelBase_1=require("../../../../../Ui/Base/UiPanelBase"),UiViewBase_1=require("../../../../../Ui/Base/UiViewBase"),ButtonItem_1=require("../../../../Common/Button/ButtonItem"),GridProxyAbstract_1=require("../../../../Util/Grid/GridProxyAbstract"),GenericLayout_1=require("../../../../Util/Layout/GenericLayout"),LguiUtil_1=require("../../../../Util/LguiUtil"),ActivitySolarSpeedController_1=require("../Controller/ActivitySolarSpeedController"),SolarSpeedDefine_1=require("../SolarSpeedDefine");class SolarSpeedResultView extends UiViewBase_1.UiViewBase{constructor(){super(...arguments),this.tFe=void 0,this.lGe=void 0,this.W8_=void 0,this.L3_=()=>new SolarSpeedRolePanel,this.kZs=()=>{ActivitySolarSpeedController_1.ActivitySolarSpeedController.Instance.HandleClickNextInResultView(),this.GetItem(3)?.SetUIActive(!1)},this.eFl=e=>{Log_1.Log.CheckDebug()&&Log_1.Log.Debug("SolarSpeed",64,"结果界面《start》动画触发",["passData",e]),this.Q8_()},this.CQ_=e=>{for(const t of this.tFe.GetLayoutItemList())t.RefreshAddFriendByPlayerIdExternal(e)}}OnRegisterComponent(){this.ComponentRegisterInfos=[[0,UE.UIHorizontalLayout],[1,UE.UIItem],[2,UE.UIItem],[3,UE.UIItem]]}async OnBeforeStartAsync(){return this.GetItem(3)?.SetUIActive(!0),this.tFe=new GenericLayout_1.GenericLayout(this.GetHorizontalLayout(0),this.L3_),this.W8_=this.tFe.GetUiAnimController(),this.lGe=new ButtonItem_1.ButtonItem(this.GetItem(2)),this.lGe.SetFunction(this.kZs),this.lGe.SetLocalTextNew(SolarSpeedDefine_1.SOLAR_SPEED_CONFIRM_BUTTON_TEXT_ID_IN_RESULT),Promise.resolve()}OnStart(){this.tFe.SetActive(!1)}OnAddEventListener(){EventSystem_1.EventSystem.Add(EventDefine_1.EEventName.OnActivitySequenceEmitEvent,this.eFl),EventSystem_1.EventSystem.Add(EventDefine_1.EEventName.ApplicationSent,this.CQ_)}OnRemoveEventListener(){EventSystem_1.EventSystem.Remove(EventDefine_1.EEventName.OnActivitySequenceEmitEvent,this.eFl),EventSystem_1.EventSystem.Remove(EventDefine_1.EEventName.ApplicationSent,this.CQ_)}async Q8_(){var e=this.OpenParam;await this.tFe.RefreshByDataAsync(e.RoleDataList),this.tFe.SetActive(!0),this.W8_.Play("Start")}}exports.SolarSpeedResultView=SolarSpeedResultView;class SolarSpeedRolePanel extends GridProxyAbstract_1.GridProxyAbstract{constructor(){super(...arguments),this.eZs=void 0,this.w3_=void 0,this.A3_=()=>{void 0!==this.eZs?.PlayerId&&ActivitySolarSpeedController_1.ActivitySolarSpeedController.Instance.HandleClickPlayerInResultView(this.eZs.PlayerId)}}OnRegisterComponent(){this.ComponentRegisterInfos=[[0,UE.UITexture],[1,UE.UITexture],[2,UE.UIItem],[3,UE.UISprite],[6,UE.UIText],[5,UE.UIText],[4,UE.UIText],[7,UE.UIButtonComponent],[8,UE.UITexture],[9,UE.UINiagara],[10,UE.UIItem]],this.BtnBindInfo=[[7,this.A3_]]}Refresh(e,t,i){this.eZs=e,this.w3_=new SolarSpeedRoleIconPanel,this.w3_.CreateThenShowByActorAsync(this.GetItem(2).GetOwner(),e.IconData),this.GetButton(7)?.RootUIComp.SetUIActive(e.IsAddButtonAvailable),this.GetItem(10)?.SetUIActive(!1);var s=UE.Color.FromHex(e.MedalColorHex),s=(this.GetTexture(0)?.SetColor(s),UE.Color.FromHex(e.FxColorHex));this.GetUiNiagara(9)?.SetColor(s),this.SetTextureByPath(e.BgPath,this.GetTexture(1)),this.SetTextureByPath(e.MedalTexturePath,this.GetTexture(8)),this.TrySetSpriteByPath(e.PlayerIndexIconPath,this.GetSprite(3),!1),this.GetText(6)?.SetText(e.NameText),LguiUtil_1.LguiUtil.TrySetLocalTextNew(this.GetText(5),e.DescTextId),LguiUtil_1.LguiUtil.TrySetLocalTextNew(this.GetText(4),e.TitleTextId)}RefreshAddFriendByPlayerIdExternal(e){var t=this.eZs;void 0!==t&&e===t.PlayerId&&t.IsAddButtonAvailable&&(this.GetItem(10)?.SetUIActive(!0),this.GetButton(7)?.RootUIComp.SetUIActive(!1))}}class SolarSpeedRoleIconPanel extends UiPanelBase_1.UiPanelBase{OnRegisterComponent(){this.ComponentRegisterInfos=[[0,UE.UITexture]]}OnStart(){var e=this.OpenParam;this.SetTextureByPath(e.IconPath,this.GetTexture(0))}}
//# sourceMappingURL=SolarSpeedResultView.js.map