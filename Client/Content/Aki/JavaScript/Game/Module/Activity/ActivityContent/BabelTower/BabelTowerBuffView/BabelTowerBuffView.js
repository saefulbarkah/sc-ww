
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BabelTowerBuffView=void 0;const UE=require("ue"),Log_1=require("../../../../../../Core/Common/Log"),UiAsyncTask_1=require("../../../../../Ui/Base/UiAsyncTask"),UiViewBase_1=require("../../../../../Ui/Base/UiViewBase"),PopupCaptionItem_1=require("../../../../../Ui/Common/PopupCaptionItem"),LguiUtil_1=require("../../../../Util/LguiUtil"),LoopScrollView_1=require("../../../../Util/ScrollView/LoopScrollView"),BabelTowerBuffDetailItem_1=require("./BabelTowerBuffDetailItem"),BabelTowerBuffItem_1=require("./BabelTowerBuffItem");class BabelTowerBuffView extends UiViewBase_1.UiViewBase{constructor(){super(...arguments),this.Pe=void 0,this.Qsc=void 0,this.Ept=void 0,this.Ksc=void 0,this.lqe=void 0,this.Xsc=void 0,this.zyc=void 0,this.Ysc=-1,this.AMo=()=>{this.CloseMe()},this.gDo=()=>{var e=new BabelTowerBuffItem_1.BabelTowerBuffItem;return e.OnToggleClick=this.zsc,e},this.zsc=e=>{this.Jsc(e)},this.Zsc=()=>{this.eac()},this.Vgc=()=>{this.jgc()}}OnRegisterComponent(){this.ComponentRegisterInfos=[[0,UE.UIItem],[1,UE.UIButtonComponent],[2,UE.UIExtendToggle],[3,UE.UIExtendToggle],[4,UE.UILoopScrollViewComponent],[5,UE.UIItem],[6,UE.UIItem],[7,UE.UIText],[8,UE.UIItem]],this.BtnBindInfo=[[2,this.Zsc],[3,this.Vgc],[1,this.AMo]]}async OnBeforeStartAsync(){this.Pe=this.OpenParam,this.Pe?(this.GetButton(1)?.RootUIComp.SetUIActive(!1),this.lqe=new PopupCaptionItem_1.PopupCaptionItem,this.Ept=new BabelTowerBuffDetailItem_1.BabelTowerBuffDetailItem,await Promise.all([this.lqe.CreateThenShowByActorAsync(this.GetItem(0).GetOwner()),this.Ept.CreateThenShowByActorAsync(this.GetItem(8).GetOwner())]),this.lqe.SetCloseCallBack(this.AMo),this.Qsc=new LoopScrollView_1.LoopScrollView(this.GetLoopScrollViewComponent(4),this.GetItem(5).GetOwner(),this.gDo,!0)):Log_1.Log.CheckError()&&Log_1.Log.Error("UiCommon",43,"Data为空")}OnBeforeShow(){this.Ksc||this.eac()}eac(){this.nQi(this.GetExtendToggle(2)),this.rac()}jgc(){this.nQi(this.GetExtendToggle(3)),this.Hgc()}rac(){var e=new UiAsyncTask_1.UiAsyncTask("BabelTowerBuffView.ToggleSelect",async()=>{await this.nac()});this.RunAsyncTask(e)}Hgc(){var e=new UiAsyncTask_1.UiAsyncTask("BabelTowerBuffView.ToggleSelect",async()=>{await this.$gc()});this.RunAsyncTask(e)}async nac(){this.Xsc=this.Pe?.BuffDataList,this.zyc=0,await this.aac()}async $gc(){this.Xsc=this.Pe?.DeTermDataList,this.zyc=1,await this.aac()}nQi(e){this.Ksc?.SetToggleState(0),this.Ksc=e,this.Ksc.SetToggleState(1)}async aac(){this.Xsc&&0!==this.Xsc.length?(this.hac(!1),await this.lac(),this.Jsc(0)):this.hac(!0)}async lac(){await this.Qsc.RefreshByDataAsync(this.Xsc)}_ac(){!this.Xsc||this.Ysc<0||this.Ysc>=this.Xsc.length||this.Ept.Update(this.Xsc[this.Ysc])}hac(e){if(this.GetItem(6).SetUIActive(e),e){let e="";0===this.zyc?e="PrefabTextItem_1001383652_Text":1===this.zyc&&(e="PrefabTextItem_438129107_Text"),LguiUtil_1.LguiUtil.SetLocalTextNew(this.GetText(7),e)}this.GetLoopScrollViewComponent(4).RootUIComp.SetUIActive(!e),this.Ept.SetActive(!e)}Jsc(e){!this.Xsc||e<0||e>=this.Xsc.length||(this.Ysc=e,this.Qsc?.SelectGridProxy(e),this._ac())}}exports.BabelTowerBuffView=BabelTowerBuffView;
//# sourceMappingURL=BabelTowerBuffView.js.map