
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ActivityRecallTaskHorItemPanel=void 0;const UE=require("ue"),ControllerHolder_1=require("../../../../../Manager/ControllerHolder"),ModelManager_1=require("../../../../../Manager/ModelManager"),UiPanelBase_1=require("../../../../../Ui/Base/UiPanelBase"),SmallItemGrid_1=require("../../../../Common/SmallItemGrid/SmallItemGrid"),ActivityRecallHelper_1=require("../Misc/ActivityRecallHelper");class ActivityRecallTaskHorItemPanel extends UiPanelBase_1.UiPanelBase{constructor(){super(...arguments),this.ScrollViewDelegate=void 0,this.GridIndex=0,this.DisplayIndex=0,this.dma=void 0,this.mma=void 0,this.Cma=void 0,this.HIa=()=>{var e;1===this.dma.RewardState?ActivityRecallHelper_1.ActivityRecallHelper.RequestAllScoreRewards():([e]=ModelManager_1.ModelManager.ActivityRecallModel.GetRecallTaskScoreRewardInfoList(this.dma.Config)[0],e=e.Id,ControllerHolder_1.ControllerHolder.ItemController.OpenItemTipsByItemId(e))},this.jIa=()=>{var e;1===this.dma.RewardState?ActivityRecallHelper_1.ActivityRecallHelper.RequestAllScoreRewards():([e]=ModelManager_1.ModelManager.ActivityRecallModel.GetRecallTaskScoreRewardInfoList(this.dma.Config)[1],e=e.Id,ControllerHolder_1.ControllerHolder.ItemController.OpenItemTipsByItemId(e))},this.FKa=()=>{1===this.dma.RewardState&&ActivityRecallHelper_1.ActivityRecallHelper.RequestAllScoreRewards()}}OnRegisterComponent(){this.ComponentRegisterInfos=[[0,UE.UISprite],[1,UE.UIItem],[2,UE.UIItem],[3,UE.UIText],[4,UE.UIItem],[5,UE.UIItem],[6,UE.UIItem],[7,UE.UIItem],[8,UE.UIItem],[9,UE.UIButtonComponent]],this.BtnBindInfo=[[9,this.FKa]]}OnStart(){this.mma=new SmallItemGrid_1.SmallItemGrid,this.mma.Initialize(this.GetItem(6).GetOwner()),this.mma.BindOnCanExecuteChange(()=>!1),this.mma.BindOnExtendToggleClicked(this.HIa),this.Cma=new SmallItemGrid_1.SmallItemGrid,this.Cma.Initialize(this.GetItem(7).GetOwner()),this.Cma.BindOnCanExecuteChange(()=>!1),this.Cma.BindOnExtendToggleClicked(this.jIa)}Refresh(e,t,i){this.dma=e,this.GridIndex=i;var i=ModelManager_1.ModelManager.ActivityRecallModel.GetRecallTaskScoreRewardInfoList(e.Config),l=e.RewardState,[s,r]=i[0],s=(ActivityRecallHelper_1.ActivityRecallHelper.RefreshItemGrid(this.mma,s,r,[0===l,1===l,2===l]),1<i.length),i=(this.Cma.SetUiActive(s),s&&([r,s]=i[1],ActivityRecallHelper_1.ActivityRecallHelper.RefreshItemGrid(this.Cma,r,s,[0===l,1===l,2===l])),this.GetText(3)),r=e.Config.NeedScore,s=(i.SetText(""+r),i.useChangeColor=2===l,this.GetSprite(0)),[r,i]=ActivityRecallHelper_1.ActivityRecallHelper.ActivityRecallData.GetRecallTaskRelativeScore(e.Config);s.SetFillAmount(r/i),this.GetItem(5).SetUIActive(1===l),this.GetItem(1).SetUIActive(2!==l),this.GetItem(2).SetUIActive(1===l),this.GetItem(8).SetUIActive(2===l)}Clear(){this.dma=void 0}OnSelected(e){}OnDeselected(e){}GetKey(e,t){return this.GridIndex}}exports.ActivityRecallTaskHorItemPanel=ActivityRecallTaskHorItemPanel;
//# sourceMappingURL=ActivityRecallTaskHorItemPanel.js.map