
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SkinController=void 0;const Protocol_1=require("../../../Core/Define/Net/Protocol"),Net_1=require("../../../Core/Net/Net"),EventDefine_1=require("../../Common/Event/EventDefine"),EventSystem_1=require("../../Common/Event/EventSystem"),ModelManager_1=require("../../Manager/ModelManager"),UiControllerBase_1=require("../../Ui/Base/UiControllerBase"),UiManager_1=require("../../Ui/UiManager"),WeaponInstance_1=require("../Weapon/WeaponInstance"),ShopSkinData_1=require("./Data/ShopSkinData"),SkinBuyDetailViewData_1=require("./Data/SkinBuyDetailViewData"),SkinObtainView_1=require("./SkinObtainView"),SkinRootViewModel_1=require("./SkinRootViewModel");class SkinController extends UiControllerBase_1.UiControllerBase{static OpenObtainSkinView(e,i){var t=new SkinObtainView_1.SkinObtainViewData;t.ObtainSkinData=e,t.OtherRewardData=i,UiManager_1.UiManager.OpenView("SkinObtainView",t)}static OpenBuyRoleSkinDetailView(e){var i=new Array;for(const n of e){const t=ShopSkinData_1.ShopSkinData.Create(n);i.push(t)}const t=SkinBuyDetailViewData_1.SkinBuyDetailViewData.Create(i);t.SetPreviewTitle("RoleSkinShopTitle_Text"),UiManager_1.UiManager.OpenView("SkinBuyDetailView",t)}static OpenBuyRoleSkinPreviewDetailViewByRoleSkinData(e){e=SkinBuyDetailViewData_1.SkinBuyDetailViewData.CreateByRoleSkinData(e);e.SetPreviewTitle("RoleSkinPreviewTitle_Text"),UiManager_1.UiManager.OpenView("SkinBuyDetailView",e)}static OpenSkinShowView(e){UiManager_1.UiManager.OpenView("SkinShowView",e)}static SkipToSkinView(e,i,t,n=-1,a){var o=new SkinRootViewModel_1.SkinRootViewModel,r=ModelManager_1.ModelManager.WeaponModel.GetWeaponDataByRoleDataId(e);r instanceof WeaponInstance_1.WeaponInstance&&(o.SetViewData(e,r.GetIncId(),i,t),o.SelectRoleSkinId=n,UiManager_1.UiManager.OpenView("SkinRootView",o,a))}static OnAddEvents(){EventSystem_1.EventSystem.Add(EventDefine_1.EEventName.OnLoadingNetDataDone,this.xkt)}static OnRemoveEvents(){EventSystem_1.EventSystem.Remove(EventDefine_1.EEventName.OnLoadingNetDataDone,this.xkt)}static OnRegisterNetEvent(){Net_1.Net.Register(28952,e=>{ModelManager_1.ModelManager.RoleSkinModel.UpdateUnlockRoleSkin(e.bBs),ModelManager_1.ModelManager.RoleSkinModel.UpdateWeaponSkinFirstWearRecord(e.bBs),ModelManager_1.ModelManager.RoleSkinModel.AddRoleSkinNewFlag(e.bBs)})}static OnUnRegisterNetEvent(){Net_1.Net.UnRegister(28952)}static nTl(){var e=new Protocol_1.Aki.Protocol.ep_;Net_1.Net.Call(23406,Protocol_1.Aki.Protocol.ep_.create(e),e=>{e&&ModelManager_1.ModelManager.RoleSkinModel.UpdateUnlockRoleSkin(e.bBs)})}}(exports.SkinController=SkinController).xkt=()=>{SkinController.nTl()};
//# sourceMappingURL=SkinController.js.map