
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SkipToDyMarkEntity=void 0;const Log_1=require("../../../../Core/Common/Log"),Vector_1=require("../../../../Core/Utils/Math/Vector"),ModelManager_1=require("../../../Manager/ModelManager"),MapController_1=require("../../Map/Controller/MapController"),MapDefine_1=require("../../Map/MapDefine"),WorldMapController_1=require("../../WorldMap/WorldMapController"),SkipTask_1=require("./SkipTask");class SkipToDyMarkEntity extends SkipTask_1.SkipTask{OnRun(e,r){var e=Number(e),r=Number(r),a=ModelManager_1.ModelManager.WorldMapModel.SearchMarkMapConfigId(e),o=ModelManager_1.ModelManager.CreatureModel.GetEntityData(r,a)?.Transform?.Pos;o?(o=new MapDefine_1.DynamicMarkCreateInfo({TrackTarget:Vector_1.Vector.Create(o.X??0,o.Y??0,o.Z??0),MarkConfigId:e,MarkType:7,DestroyOnUnTrack:!0,MapAndDungeonInfo:{MapConfigId:a}}),e=ModelManager_1.ModelManager.MapModel.CreateMapMark(o),MapController_1.MapController.RequestTrackMapMark({MarkType:7,MarkId:e,Track:!0}),o={MarkId:e,MarkType:7},WorldMapController_1.WorldMapController.OpenView(2,!1,o)):Log_1.Log.CheckError()&&Log_1.Log.Error("SkipInterface",43,"实体或实体位置为空",["entityId",r],["mapId",a]),this.Finish()}}exports.SkipToDyMarkEntity=SkipToDyMarkEntity;
//# sourceMappingURL=SkipToDyMarkEntity.js.map