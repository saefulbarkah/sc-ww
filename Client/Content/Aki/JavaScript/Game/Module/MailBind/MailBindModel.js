
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MailBindModel=void 0;const CommonDefine_1=require("../../../Core/Define/CommonDefine"),MultiTextLang_1=require("../../../Core/Define/ConfigQuery/MultiTextLang"),ModelBase_1=require("../../../Core/Framework/ModelBase"),MathUtils_1=require("../../../Core/Utils/MathUtils"),StringUtils_1=require("../../../Core/Utils/StringUtils"),LocalStorage_1=require("../../Common/LocalStorage"),LocalStorageDefine_1=require("../../Common/LocalStorageDefine"),TimeUtil_1=require("../../Common/TimeUtil"),ConfigManager_1=require("../../Manager/ConfigManager"),ControllerHolder_1=require("../../Manager/ControllerHolder");class MailBindModel extends ModelBase_1.ModelBase{constructor(){super(...arguments),this.Ptl=!1,this.wtl=!1,this.tEt=-0}UpdateByProtoMailBindInfo(e){this.Ptl=e.qn1,this.wtl=e.On1,this.tEt=MathUtils_1.MathUtils.LongToNumber(e.Gn1)/1e3}GetIsBind(){return this.Ptl}GetIsReward(){return this.wtl}GetCloseTime(){return this.tEt}GetState(){return this.wtl?2:this.Ptl?1:0}GetRemainTimeText(e){var i,t=TimeUtil_1.TimeUtil.GetServerTime(),e=Math.max(e-t,1),t=this.GetTimeTypeData(e);return 0===t[0]?ConfigManager_1.ConfigManager.TextConfig.GetTextById("NotEnoughOneHour"):(i=MultiTextLang_1.configMultiTextLang.GetLocalTextNew("ActivityRemainingTime"),e=TimeUtil_1.TimeUtil.GetCountDownDataFormat2(e,t[0],t[1]).CountDownText??"",StringUtils_1.StringUtils.Format(i,e))}GetTimeTypeData(e){return e>CommonDefine_1.SECOND_PER_DAY?[3,2]:e>CommonDefine_1.SECOND_PER_HOUR?[2,2]:[0,0]}CheckMailBindRedDot(){var e;return!this.GetIsReward()&&(!!this.GetIsBind()||!(e=LocalStorage_1.LocalStorage.GetPlayer(LocalStorageDefine_1.ELocalStoragePlayerKey.MailBindNextShowRedDotTime))||e<=TimeUtil_1.TimeUtil.GetServerTimeStamp())}CheckGlobalMailBindOpen(){return!(!ControllerHolder_1.ControllerHolder.KuroSdkController.GetIfGlobalSdk()||this.GetIsReward()&&TimeUtil_1.TimeUtil.GetServerTime()>this.GetCloseTime())}}exports.MailBindModel=MailBindModel;
//# sourceMappingURL=MailBindModel.js.map