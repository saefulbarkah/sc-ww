
"use strict";var _a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.PersonalController=void 0;const Protocol_1=require("../../../../Core/Define/Net/Protocol"),Net_1=require("../../../../Core/Net/Net"),StringUtils_1=require("../../../../Core/Utils/StringUtils"),EventDefine_1=require("../../../Common/Event/EventDefine"),EventSystem_1=require("../../../Common/Event/EventSystem"),ControllerHolder_1=require("../../../Manager/ControllerHolder"),ModelManager_1=require("../../../Manager/ModelManager"),UiControllerBase_1=require("../../../Ui/Base/UiControllerBase"),ScrollingTipsController_1=require("../../ScrollingTips/ScrollingTipsController");class PersonalController extends UiControllerBase_1.UiControllerBase{static OnAddEvents(){EventSystem_1.EventSystem.Add(EventDefine_1.EEventName.OnLoadingNetDataDone,this.xkt),EventSystem_1.EventSystem.Add(EventDefine_1.EEventName.OnFunctionOpenSet,this.vnc),EventSystem_1.EventSystem.Add(EventDefine_1.EEventName.OnFunctionOpenUpdate,this.vnc)}static OnRemoveEvents(){EventSystem_1.EventSystem.Remove(EventDefine_1.EEventName.OnLoadingNetDataDone,this.xkt),EventSystem_1.EventSystem.Remove(EventDefine_1.EEventName.OnFunctionOpenSet,this.vnc),EventSystem_1.EventSystem.Remove(EventDefine_1.EEventName.OnFunctionOpenUpdate,this.vnc)}static c3l(){var e=new Protocol_1.Aki.Protocol.E0_;Net_1.Net.Call(16172,e,e=>{e&&ModelManager_1.ModelManager.PersonalModel.InitPlayerHeadData(e.FE_)})}static SendBirthdayInitRequest(o){var e=Protocol_1.Aki.Protocol.SYn.create();e.ZVn=o,Net_1.Net.Call(29302,e,e=>{e&&(e.Q4n===Protocol_1.Aki.Protocol.Q4n.KRs?ModelManager_1.ModelManager.PersonalModel.SetBirthday(o):ControllerHolder_1.ControllerHolder.ErrorCodeController.OpenErrorCodeTipView(e.Q4n,21870))})}static SendBirthdayShowSetRequest(o){var e=Protocol_1.Aki.Protocol.wYn.create();e.$7n=o,Net_1.Net.Call(23088,e,e=>{e&&(e.Q4n===Protocol_1.Aki.Protocol.Q4n.KRs?ModelManager_1.ModelManager.PersonalModel.SetBirthdayDisplay(o):ControllerHolder_1.ControllerHolder.ErrorCodeController.OpenErrorCodeTipView(e.Q4n,29533))})}static SendRoleShowListUpdateRequest(o){var e=Protocol_1.Aki.Protocol.yYn.create();e.Y7n=o,Net_1.Net.Call(27198,e,e=>{e&&(e.Q4n===Protocol_1.Aki.Protocol.Q4n.KRs?ModelManager_1.ModelManager.PersonalModel.UpdateRoleShowList(o):ControllerHolder_1.ControllerHolder.ErrorCodeController.OpenErrorCodeTipView(e.Q4n,24888))})}static async SendRoleShowListUpdateRequestAsync(e){var o=Protocol_1.Aki.Protocol.yYn.create(),o=(o.Y7n=e,await Net_1.Net.CallAsync(27198,o));if(o){if(o.Q4n===Protocol_1.Aki.Protocol.Q4n.KRs)return ModelManager_1.ModelManager.PersonalModel.UpdateRoleShowList(e),!0;ControllerHolder_1.ControllerHolder.ErrorCodeController.OpenErrorCodeTipView(o.Q4n,24888)}return!1}static SendChangeCardRequest(o){var e=Protocol_1.Aki.Protocol.RYn.create();e.J7n=o,Net_1.Net.Call(22273,e,e=>{e&&(e.Q4n===Protocol_1.Aki.Protocol.Q4n.KRs?ModelManager_1.ModelManager.PersonalModel.SetCurCardId(o):ControllerHolder_1.ControllerHolder.ErrorCodeController.OpenErrorCodeTipView(e.Q4n,15019))})}static SendReadCardRequest(o){var e=Protocol_1.Aki.Protocol.AYn.create();e.J7n=o,Net_1.Net.Call(18540,e,e=>{e&&(e.Q4n===Protocol_1.Aki.Protocol.Q4n.KRs?ModelManager_1.ModelManager.PersonalModel.UpdateCardUnlockList(o,!0):ControllerHolder_1.ControllerHolder.ErrorCodeController.OpenErrorCodeTipView(e.Q4n,16462))})}static SendModifySignatureRequest(o){var e=Protocol_1.Aki.Protocol.uYn.create();e.zVn=o,Net_1.Net.Call(21493,e,e=>{e&&(e.Q4n===Protocol_1.Aki.Protocol.Q4n.KRs?ModelManager_1.ModelManager.PersonalModel.SetSignature(o):e.Q4n===Protocol_1.Aki.Protocol.Q4n.Proto_ContainsDirtyWord||e.Q4n===Protocol_1.Aki.Protocol.Q4n.Proto_ErrRoleInvalidNameLength?ScrollingTipsController_1.ScrollingTipsController.ShowTipsById("NotElegantName"):ControllerHolder_1.ControllerHolder.ErrorCodeController.OpenErrorCodeTipView(e.Q4n,19076))})}static SendChangeHeadPhotoRequest(o){var e=Protocol_1.Aki.Protocol.dYn.create();e.z7n=o,Net_1.Net.Call(26659,e,e=>{e&&(e.Q4n===Protocol_1.Aki.Protocol.Q4n.KRs?ModelManager_1.ModelManager.PersonalModel.SetHeadPhotoId(o):ControllerHolder_1.ControllerHolder.ErrorCodeController.OpenErrorCodeTipView(e.Q4n,21808))})}static CheckCardIsUsing(o){var t=ModelManager_1.ModelManager.PersonalModel.GetCardShowList(),r=t.length;let l=!1;for(let e=0;e<r;e++)if(t[e]===o){l=!0;break}return l}static CheckCardIsUnLock(o){var t=ModelManager_1.ModelManager.PersonalModel.GetCardDataList(),r=t.length;for(let e=0;e<r;e++){var l=t[e];if(l.CardId===o)return l.IsUnLock}return!1}static OnRegisterNetEvent(){Net_1.Net.Register(23021,e=>{ModelManager_1.ModelManager.PersonalModel.AddCardUnlockList(e.J7n,!1)}),Net_1.Net.Register(25883,e=>{ModelManager_1.ModelManager.PersonalModel.SetHeadPhotoId(e.dSs)}),Net_1.Net.Register(26523,e=>{ModelManager_1.ModelManager.PersonalModel.SetRoleShowList(e.MSs)}),Net_1.Net.Register(18332,e=>{ModelManager_1.ModelManager.PersonalModel.SetSignature(e.zVn)}),Net_1.Net.Register(17820,e=>{ModelManager_1.ModelManager.FunctionModel.SetPlayerName(e.H8n),ModelManager_1.ModelManager.PersonalModel.SetModifyNameInfo(e.Zha,StringUtils_1.EMPTY_STRING)}),Net_1.Net.Register(20466,e=>{ModelManager_1.ModelManager.PersonalModel.UpdatePlayerHeadData(e.NE_)}),Net_1.Net.Register(15740,e=>{ModelManager_1.ModelManager.PersonalModel.SetDressedPlayerTitle(e.Jtc,e.Ztc)}),Net_1.Net.Register(20955,e=>{ModelManager_1.ModelManager.PersonalModel.UpdateUnDressedPlayerTitleList(e.eic)})}static OnUnRegisterNetEvent(){Net_1.Net.UnRegister(23021),Net_1.Net.UnRegister(25883),Net_1.Net.UnRegister(26523),Net_1.Net.UnRegister(18332),Net_1.Net.UnRegister(17820),Net_1.Net.UnRegister(20466),Net_1.Net.UnRegister(15740),Net_1.Net.UnRegister(20955)}static SendChangePlayerTitleRequest(e){var o=Protocol_1.Aki.Protocol.Ytc.create();o.Jtc=e,Net_1.Net.Call(19052,o,e=>{e&&e.Q4n!==Protocol_1.Aki.Protocol.Q4n.KRs&&ControllerHolder_1.ControllerHolder.ErrorCodeController.OpenErrorCodeTipView(e.Q4n,16666)})}}exports.PersonalController=PersonalController,(_a=PersonalController).xkt=()=>{PersonalController.c3l()},PersonalController.RequestModifySignature=async e=>{var o=Protocol_1.Aki.Protocol.uYn.create(),o=(o.zVn=e,await Net_1.Net.CallAsync(21493,o));return o.Q4n===Protocol_1.Aki.Protocol.Q4n.KRs?ModelManager_1.ModelManager.PersonalModel.SetSignature(e):o.Q4n===Protocol_1.Aki.Protocol.Q4n.Proto_ContainsDirtyWord||o.Q4n===Protocol_1.Aki.Protocol.Q4n.Proto_ErrRoleInvalidNameLength?ScrollingTipsController_1.ScrollingTipsController.ShowTipsById("NotElegantName"):ControllerHolder_1.ControllerHolder.ErrorCodeController.OpenErrorCodeTipView(o.Q4n,19076),o.Q4n},PersonalController.RequestModifyName=async e=>{var o=Protocol_1.Aki.Protocol.lYn.create(),e=(o.H8n=e,await Net_1.Net.CallAsync(26308,o));return e.Q4n===Protocol_1.Aki.Protocol.Q4n.KRs?ModelManager_1.ModelManager.PersonalModel.SetModifyNameInfo(e.Zha,e.ela):e.Q4n===Protocol_1.Aki.Protocol.Q4n.Proto_ContainsDirtyWord||e.Q4n===Protocol_1.Aki.Protocol.Q4n.Proto_ErrRoleInvalidNameLength?ScrollingTipsController_1.ScrollingTipsController.ShowTipsById("NotElegantName"):ControllerHolder_1.ControllerHolder.ErrorCodeController.OpenErrorCodeTipView(e.Q4n,21808),e.Q4n},PersonalController.vnc=(e,o)=>{10082===e&&o&&(e=Protocol_1.Aki.Protocol.Ktc.create(),Net_1.Net.Call(20359,e,e=>{e&&ModelManager_1.ModelManager.PersonalModel.InitPlayerTitleData(e.tic)}))};
//# sourceMappingURL=PersonalController.js.map