
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShipTowerCoverItem=void 0;const UE=require("ue"),ConfigManager_1=require("../../../Manager/ConfigManager"),ModelManager_1=require("../../../Manager/ModelManager"),UiPanelBase_1=require("../../../Ui/Base/UiPanelBase"),ButtonItem_1=require("../../Common/Button/ButtonItem"),SmallItemGrid_1=require("../../Common/SmallItemGrid/SmallItemGrid"),GenericLayout_1=require("../../Util/Layout/GenericLayout"),ShipTowerDefine_1=require("../ShipTowerDefine"),ShipTowerCoverRoleItem_1=require("./ShipTowerCoverRoleItem");class ShipTowerCoverItem extends UiPanelBase_1.UiPanelBase{constructor(){super(...arguments),this.fGt=void 0,this.Es_=!1,this.Is_=void 0,this.Ts_=void 0,this.bs_=void 0,this.Ls_=void 0,this.As_=void 0,this.ConfirmCallback=void 0,this.Qho=()=>{this.ConfirmCallback?.(this.fGt,this.Es_)},this.uyi=()=>new ShipTowerCoverRoleItem_1.ShipTowerCoverRoleItem,this.qs_=e=>{}}async Init(e){await this.CreateThenShowByActorAsync(e.GetOwner())}OnRegisterComponent(){this.ComponentRegisterInfos=[[0,UE.UIHorizontalLayout],[1,UE.UIHorizontalLayout],[2,UE.UIItem],[3,UE.UIItem],[4,UE.UIText],[5,UE.UITexture],[6,UE.UIItem]]}async OnBeforeStartAsync(){await super.OnBeforeStartAsync(),this.Is_=new ButtonItem_1.ButtonItem(this.GetItem(6)),this.Is_.SetFunction(this.Qho),this.Ts_=new GenericLayout_1.GenericLayout(this.GetHorizontalLayout(0),this.uyi),this.bs_=new GenericLayout_1.GenericLayout(this.GetHorizontalLayout(1),this.uyi),this.Ls_=new SmallItemGrid_1.SmallItemGrid,this.Ls_.Initialize(this.GetItem(2).GetOwner()),this.Ls_.BindOnExtendToggleClicked(this.qs_),this.As_=new SmallItemGrid_1.SmallItemGrid,this.As_.Initialize(this.GetItem(3).GetOwner()),this.As_.BindOnExtendToggleClicked(this.qs_)}UpdateData(e,i=!1){this.fGt=e,this.Es_=i;let t=void 0,s=void 0,r=void 0,o=void 0;this.Es_?(t=e.TeamDataList[0].GetRoleIdListEdit(),s=e.TeamDataList[1].GetRoleIdListEdit(),r=e.TeamDataList[0].BuffDataEdit,o=e.TeamDataList[1].BuffDataEdit,this.Is_.SetShowText(ShipTowerDefine_1.shipTowerTextKey.Confirm)):(this.Is_.SetShowText(ShipTowerDefine_1.shipTowerTextKey.Cancel),t=e.TeamDataList[0].GetRoleIdList(),s=e.TeamDataList[1].GetRoleIdList(),r=e.TeamDataList[0].BuffData,o=e.TeamDataList[1].BuffData),this.Ts_.RefreshByData(t),this.bs_.RefreshByData(s),this.Ls_.Apply({Data:r,Type:4,ItemConfigId:r?.ItemId??1}),this.As_.Apply({Data:o,Type:4,ItemConfigId:o?.ItemId??1});var i=this.Es_?e.NewChallengeScore:e.CurrentScore,h=(this.GetText(4).SetText(i.toString()),this.GetTexture(5)),e=ModelManager_1.ModelManager.ShipTowerModel.GetStageGradeResIdByStageId(e.Id,i);h.SetUIActive(!!e),e&&(i=ConfigManager_1.ConfigManager.UiResourceConfig.GetResourcePath(e),this.SetTextureByPath(i,h))}}exports.ShipTowerCoverItem=ShipTowerCoverItem;
//# sourceMappingURL=ShipTowerCoverItem.js.map