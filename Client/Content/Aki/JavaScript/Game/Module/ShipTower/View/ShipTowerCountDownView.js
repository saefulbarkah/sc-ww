
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShipTowerCountDownView=void 0;const UE=require("ue"),Log_1=require("../../../../Core/Common/Log"),TimerSystem_1=require("../../../../Core/Timer/TimerSystem"),EventDefine_1=require("../../../Common/Event/EventDefine"),EventSystem_1=require("../../../Common/Event/EventSystem"),TimeUtil_1=require("../../../Common/TimeUtil"),UiViewBase_1=require("../../../Ui/Base/UiViewBase");class ShipTowerCountDownView extends UiViewBase_1.UiViewBase{constructor(){super(...arguments),this.OpenParam=void 0,this.v7_=void 0,this.rq_=(e,t)=>{var i=Math.floor(e%TimeUtil_1.TimeUtil.Hour/TimeUtil_1.TimeUtil.Minute),s=Math.floor(e%TimeUtil_1.TimeUtil.Minute),e=Math.floor(100*(e-Math.floor(e))),i=this.oq_(i),s=this.oq_(s),e=this.oq_(e);this.GetText(0)?.SetText(i+`:${s}:`+e)},this.nq_=e=>{this.GetItem(1)?.SetUIActive(!0);this.GetText(2)?.ShowTextNew(e),this.y7_();this.v7_=TimerSystem_1.TimerSystem.Delay(this.S7_,3e3),this.PlaySequence("WaveIn")},this.sq_=()=>{this.GetItem(1)?.SetUIActive(!1)},this.S7_=()=>{this.M7_()}}OnRegisterComponent(){this.ComponentRegisterInfos=[[0,UE.UIText],[1,UE.UIItem],[2,UE.UIText]]}Ss_(){Log_1.Log.CheckDebug()&&Log_1.Log.Debug("Temp",69,"",["DataParam",this.OpenParam])}async OnBeforeStartAsync(){this.Ss_(),await super.OnBeforeStartAsync()}OnStart(){this.sq_()}OnAddEventListener(){EventSystem_1.EventSystem.Add(EventDefine_1.EEventName.OnGamePlayCdChanged,this.rq_),EventSystem_1.EventSystem.Add(EventDefine_1.EEventName.ShipTowerBattleTip,this.nq_)}OnRemoveEventListener(){EventSystem_1.EventSystem.Remove(EventDefine_1.EEventName.OnGamePlayCdChanged,this.rq_),EventSystem_1.EventSystem.Remove(EventDefine_1.EEventName.ShipTowerBattleTip,this.nq_)}OnBeforeShow(){}OnBeforeDestroy(){this.y7_()}oq_(e){return(e<10?"0":"")+e}async M7_(){await this.PlaySequenceAsync("WaveOut"),this.sq_()}y7_(){void 0!==this.v7_&&(TimerSystem_1.TimerSystem.Remove(this.v7_),this.v7_=void 0)}}exports.ShipTowerCountDownView=ShipTowerCountDownView;
//# sourceMappingURL=ShipTowerCountDownView.js.map