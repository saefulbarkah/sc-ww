
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PlayerTitleInfoTip=exports.PlayerTitleItem=void 0;const UE=require("ue"),EventDefine_1=require("../../Common/Event/EventDefine"),EventSystem_1=require("../../Common/Event/EventSystem"),ConfigManager_1=require("../../Manager/ConfigManager"),ModelManager_1=require("../../Manager/ModelManager"),UiPanelBase_1=require("../../Ui/Base/UiPanelBase"),UiViewBase_1=require("../../Ui/Base/UiViewBase"),UiManager_1=require("../../Ui/UiManager"),PersonalDefine_1=require("../Personal/Model/PersonalDefine"),LguiUtil_1=require("../Util/LguiUtil");class PlayerTitleItem extends UiPanelBase_1.UiPanelBase{constructor(){super(...arguments),this.dnc=void 0,this.L0=!1,this._nc=0,this.eje=()=>{var e,i,t;this.L0||(e=this.GetItem(11),i=ModelManager_1.ModelManager.PersonalModel.GetPlayerTitleInfoString(this.dnc.Id,this._nc),t=this.dnc.IconInTitleInfo,UiManager_1.UiManager.OpenView("PlayerTitleInfoTip",{ItemForLocation:e,PlayerTitleInfoString:i,PlayerTitleInfoIcon:t},()=>{var e=UiManager_1.UiManager.GetViewByName("PlayerTitleInfoTip");e&&e.BindCloseCallback(this.EUt)}))},this.EUt=()=>{this.GetExtendToggle(12).SetToggleStateForce(0)}}OnRegisterComponent(){this.ComponentRegisterInfos=[[0,UE.UITexture],[1,UE.UIItem],[2,UE.UITexture],[3,UE.UITexture],[4,UE.UIText],[6,UE.UITexture],[7,UE.UIItem],[8,UE.UITexture],[9,UE.UIText],[10,UE.UITexture],[11,UE.UIItem],[12,UE.UIExtendToggle]],this.BtnBindInfo=[[12,this.eje]]}Refresh(e,i){e&&0!==e?(this.SetUiActive(!0),this.dnc=ConfigManager_1.ConfigManager.InventoryConfig.GetPlayerTitleItemConfig(e),this.dnc&&(LguiUtil_1.LguiUtil.SetLocalTextNew(this.GetText(9),this.dnc.TitleName),(e=this.dnc.TitleBgIcon)&&this.SetTextureByPath(e,this.GetTexture(0)),e=this.dnc.SelectedIcon,this.SetTextureByPath(e,this.GetTexture(10)),1===(e=this.dnc.TitleStyle)?(this.GetItem(1)?.SetUIActive(!1),this.GetItem(7)?.SetUIActive(!0),this.mnc(this.dnc.TitleIcon,this.GetTexture(8))):2===e&&(this.GetItem(1)?.SetUIActive(!0),this.GetItem(7)?.SetUIActive(!1),this.mnc(this.dnc.TitleIcon,this.GetTexture(6)),this.mnc(this.dnc.StarTitleBgIcon,this.GetTexture(2)),this.mnc(this.dnc.StarTitleIcon,this.GetTexture(3)),e=i??0,i=this.GetText(4))&&(this._nc=e,i.SetText(e.toString()),i.SetColor(UE.Color.FromHex(PersonalDefine_1.playerTitleQualityToColor[this.dnc.TitleQuality]))))):this.SetUiActive(!1)}mnc(e,i){this.SetTextureByPath(e,i);e=this.dnc.TitleQuality;i?.SetColor(UE.Color.FromHex(PersonalDefine_1.playerTitleQualityToColor[e]))}SetIsPreview(e){this.L0=e}}exports.PlayerTitleItem=PlayerTitleItem;class PlayerTitleInfoTip extends UiViewBase_1.UiViewBase{constructor(){super(...arguments),this.fnc=void 0,this.gnc="",this.PNo=void 0,this.$St=()=>{UiManager_1.UiManager.IsViewOpen("ChatView")&&this.Nmc()},this.Nmc=()=>{this.CloseMe()},this.eje=()=>{this.CloseMe()}}OnRegisterComponent(){this.ComponentRegisterInfos=[[0,UE.UIItem],[1,UE.UIItem],[2,UE.UIText],[3,UE.UIButtonComponent],[4,UE.UITexture]],this.BtnBindInfo=[[3,this.eje]]}OnAddEventListener(){EventSystem_1.EventSystem.Add(EventDefine_1.EEventName.UpdateNavigationListener,this.Nmc),EventSystem_1.EventSystem.Add(EventDefine_1.EEventName.ChangeModeFinish,this.Nmc),EventSystem_1.EventSystem.Add(EventDefine_1.EEventName.ResetToBattleView,this.Nmc),EventSystem_1.EventSystem.Add(EventDefine_1.EEventName.OnAddChatContent,this.$St)}OnRemoveEventListener(){EventSystem_1.EventSystem.Remove(EventDefine_1.EEventName.UpdateNavigationListener,this.Nmc),EventSystem_1.EventSystem.Remove(EventDefine_1.EEventName.ChangeModeFinish,this.Nmc),EventSystem_1.EventSystem.Remove(EventDefine_1.EEventName.ResetToBattleView,this.Nmc),EventSystem_1.EventSystem.Remove(EventDefine_1.EEventName.OnAddChatContent,this.$St)}OnBeforeShow(){var e=this.OpenParam;this.fnc=e.ItemForLocation,this.gnc=e.PlayerTitleInfoString;this.GetItem(1).D_K2_SetWorldLocation(this.fnc.D_K2_GetComponentLocation(),!1,void 0,!0),this.UpdateText();var i=this.GetTexture(4);this.SetTextureByPath(e.PlayerTitleInfoIcon,i)}OnBeforeDestroy(){this.PNo&&this.PNo()}UpdateText(){this.GetText(2)?.SetText(this.gnc)}BindCloseCallback(e){this.PNo=e}}exports.PlayerTitleInfoTip=PlayerTitleInfoTip;
//# sourceMappingURL=PlayerTitleItem.js.map