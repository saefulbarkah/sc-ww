
"use strict";var _a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.KuroAutoCoolController=void 0;const puerts_1=require("puerts"),UE=require("ue"),Log_1=require("../../../Core/Common/Log"),ControllerBase_1=require("../../../Core/Framework/ControllerBase"),GameSettingsManager_1=require("../../../Game/GameSettings/GameSettingsManager"),GameSettingsDeviceRender_1=require("../../GameSettings/GameSettingsDeviceRender");class KuroAutoCoolController extends ControllerBase_1.ControllerBase{static SetMaxFrameRate(e){var t=UE.GameUserSettings.GetGameUserSettings();t.SetFrameRateLimit(e),t.ApplySettings(!0)}static ReduceImageQualityAndFrameRate(){var e=GameSettingsManager_1.GameSettingsManager.Get(11),t=GameSettingsManager_1.GameSettingsManager.Get(10);e&&t&&(t=e.GetCurrentValue(),45<(e=GameSettingsDeviceRender_1.GameSettingsDeviceRender.GetFrameByList(t))?(this.Pih=e,this.SetMaxFrameRate(45),this.AXa=!0,this.RKo&&Log_1.Log.CheckInfo()&&Log_1.Log.Info("Render",69,"进入自动降温阶段",["降温至最大帧率",45])):30<e&&e<=45&&(this.Pih=e,this.SetMaxFrameRate(30),this.AXa=!0,this.RKo)&&Log_1.Log.CheckInfo()&&Log_1.Log.Info("Render",69,"进入自动降温阶段",["降温至最大帧率",30]))}static RestoreLastConfig(){this.SetMaxFrameRate(this.Pih),this.AXa=!1,this.RKo&&Log_1.Log.CheckInfo()&&Log_1.Log.Info("Render",69,"退出自动降温阶段",["恢复至最大帧率",this.Pih])}static OnInit(){this.TemperatureDelegate=(0,puerts_1.toManualReleaseDelegate)(this.pth);var e=GameSettingsManager_1.GameSettingsManager.Get(11),t=GameSettingsManager_1.GameSettingsManager.Get(10);return e&&t&&(t=e.GetCurrentValue(),e=GameSettingsDeviceRender_1.GameSettingsDeviceRender.GetFrameByList(t),this.Pih=e,this.AXa=!1),!0}static OnClear(){return(0,puerts_1.releaseManualReleaseDelegate)(this.pth),!0}static OnTick(e){}}exports.KuroAutoCoolController=KuroAutoCoolController,(_a=KuroAutoCoolController).RKo=!0,KuroAutoCoolController.Pih=30,KuroAutoCoolController.AXa=!1,KuroAutoCoolController.TemperatureDelegate=void 0,KuroAutoCoolController.pth=(e,t,r)=>{_a.RKo&&Log_1.Log.CheckInfo()&&Log_1.Log.Info("Render",69,"KuroAutoCoolController.temperature",["bResult",e],["currentTemperature",t],["tempBudget",r]),!e||r<=5?_a.ReduceImageQualityAndFrameRate():_a.AXa&&_a.RestoreLastConfig()};
//# sourceMappingURL=KuroAutoCoolController.js.map