
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UiCameraDebugTool=void 0;const puerts_1=require("puerts"),UE=require("ue"),ResourceSystem_1=require("../../../Core/Resource/ResourceSystem"),GlobalData_1=require("../../GlobalData"),UiCameraAnimationManager_1=require("../UiCameraAnimation/UiCameraAnimationManager"),UiCameraControlRotationComponent_1=require("./UiCameraComponent/UiCameraControlRotationComponent"),UiCameraManager_1=require("./UiCameraManager");class UiCameraDebugTool{constructor(){this.Jl_=void 0,this.Zl_=!1,this.e__=!1,this.t__=UE.NewMap(UE.BuiltinString,UE.BuiltinString),this.i__=()=>{UiCameraAnimationManager_1.UiCameraAnimationManager.GetLastHandleData()?.Refresh(),UiCameraAnimationManager_1.UiCameraAnimationManager.ReactivateCameraHandle(!1,!1)}}Init(){this.Jl_=ResourceSystem_1.ResourceSystem.GetLoadedAsset("/Game/Aki/Data/UiCameraAnimation/DT_UiCameraSetting.DT_UiCameraSetting",UE.CompositeDataTable)}GetDtSyncEnabled(){return this.Zl_}StartDtSync(){if(!this.Zl_){var a=this.Jl_?.ParentTables;if(a){var t=(0,puerts_1.toManualReleaseDelegate)(this.i__);for(let e=0;e<a.Num();e++){var r=a.Get(e);UE.KuroDataTableFunctionLibrary.AddOnDataTableChangedDelegate(r,GlobalData_1.GlobalData.World,t)}this.Zl_=!0}}}EndDtSync(){if(this.Zl_){var a=this.Jl_?.ParentTables;if(a){for(let e=0;e<a.Num();e++){var t=a.Get(e);UE.KuroDataTableFunctionLibrary.RemoveOnDataTableChangedDelegate(t,GlobalData_1.GlobalData.World)}(0,puerts_1.toManualReleaseDelegate)(this.i__),this.Zl_=!1}}}UpdateDebugCameraProps(){var e=UiCameraAnimationManager_1.UiCameraAnimationManager.GetLastHandleData();this.t__.Set("CurrentHandleName",e?.GetHandleName()??""),this.t__.Set("DtSync",this.GetDtSyncEnabled()?"true":"false"),this.t__.Set("ArmLengthSync",this.GetArmLengthSyncEnabled()?"true":"false")}GetDebugCameraProps(){return this.t__}GetArmLengthSyncEnabled(){return this.e__}StartArmLengthSync(){this.e__=!0}EndArmLengthSync(){this.e__=!1}ArmLengthSync(e){UiCameraManager_1.UiCameraManager.Get().GetUiCameraComponent(UiCameraControlRotationComponent_1.UiCameraControlRotationComponent).SetArmLength(e)}}exports.UiCameraDebugTool=UiCameraDebugTool;
//# sourceMappingURL=UiCameraDebugTool.js.map