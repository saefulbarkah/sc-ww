
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TreasureBoxDetectorItemRangeHandle=void 0;const CommonParamById_1=require("../../../../../../Core/Define/ConfigCommon/CommonParamById"),Vector2D_1=require("../../../../../../Core/Utils/Math/Vector2D"),MarkDetectorRangeImageComponent_1=require("../Components/MarkDetectorRangeImageComponent"),MarkItemComponentHandle_1=require("./MarkItemComponentHandle");class TreasureBoxDetectorItemRangeHandle extends MarkItemComponentHandle_1.MarkItemComponentHandle{constructor(){super(...arguments),this.RangeComponentInternal=void 0}GetRangeComponent(){return void 0===this.RangeComponentInternal&&(this.RangeComponentInternal=new MarkDetectorRangeImageComponent_1.MarkDetectorRangeImageComponent,this.RangeComponentInternal.CreateByPoolResourceIdAsync("UiItem_ProbeArea",this.Context.MarkRootItem).then(()=>{var e;void 0!==this.RangeComponentInternal&&(this.RangeComponentInternal.GetRootItem().SetAnchorOffset(Vector2D_1.Vector2D.ZeroVector),e=CommonParamById_1.configCommonParamById.GetIntConfig("TreasureBoxDetectionMaxDistance"),this.RangeComponentInternal.RangeImage.SetWidth(e/100*2),this.RangeComponentInternal.RangeImage.SetHeight(e/100*2),this.RangeComponentInternal.GetRootItem().SetHierarchyIndex(0),this.ApplyModified())})),this.RangeComponentInternal}DestroyRangeComponent(){void 0!==this.RangeComponentInternal&&(this.RangeComponentInternal.RecycleToPool(),this.RangeComponentInternal=void 0)}OnSetVisible(e){this.Context.MarkItemEntity.ViewLifeCircle.SetChildViewVisibility(2,e)}UpdateRangeScale(){var e,t=this.Context.MarkItemEntity.ViewLifeCircle.IsChildViewVisible(2);t&&(e=this.GetRangeComponent(),t)&&e.SetRangeScale(1/this.Context.MarkRootItem.RelativeScale3D.X,1/this.Context.MarkRootItem.RelativeScale3D.Y,1/this.Context.MarkRootItem.RelativeScale3D.Z)}OnApplyModified(){var e,t,o=this.Context.MarkItemEntity.ViewLifeCircle;o.IsChildViewStateDirty(2)&&((e=this.GetRangeComponent()).IsStart||e.IsShowOrShowing||e.IsHideOrHiding)&&(t=o.IsChildViewVisible(2),o.SetChildViewVisibleClean(2),this.UpdateRangeScale(),e.SetActive(t))}OnDispose(){this.DestroyRangeComponent(),super.OnDispose()}}exports.TreasureBoxDetectorItemRangeHandle=TreasureBoxDetectorItemRangeHandle;
//# sourceMappingURL=TreasureBoxDetectorItemRangeHandle.js.map