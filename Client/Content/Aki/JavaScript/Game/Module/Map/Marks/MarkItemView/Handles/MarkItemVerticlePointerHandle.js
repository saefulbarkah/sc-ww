
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MarkItemVerticalPointerHandle=void 0;const UE=require("ue"),MarkVerticalPointerComponent_1=require("../Components/MarkVerticalPointerComponent"),MarkItemComponentHandle_1=require("./MarkItemComponentHandle"),POINTER_RANGE=2e3;class MarkItemVerticalPointerHandle extends MarkItemComponentHandle_1.MarkItemComponentHandle{constructor(){super(...arguments),this.ComponentInternal=void 0}UpdateVerticalPointerType(e,t){this.Context.MarkItemEntity.ViewLifeCircle.EnableVerticalPointer?(e=this.qRi(e,t),this.Context.MarkItemEntity.ViewLifeCircle.VerticalPointerType=e,this.SetVisible(0!==e)):this.SetVisible(!1)}qRi(e,t){return 2===this.Context.MarkItem.MapType||(e=e.Z-t.Z,Math.abs(e)<POINTER_RANGE)?0:e<0?1:2}GetComponent(){return void 0===this.ComponentInternal&&(this.ComponentInternal=new MarkVerticalPointerComponent_1.MarkVerticalPointerComponent,this.ComponentInternal.CreateByPoolResourceIdAsync("UiItem_MarkArrow_Prefab").then(()=>{var e;void 0!==this.ComponentInternal&&(e=this.Context.MarkItem,e=new UE.Vector(e.CornerScale,e.CornerScale,e.CornerScale),this.ComponentInternal.GetRootItem().SetUIRelativeScale3D(e),this.ApplyModified())})),this.ComponentInternal}DestroyComponent(){void 0!==this.ComponentInternal&&(this.ComponentInternal.RecycleToPool(),this.ComponentInternal=void 0)}OnSetVisible(e){this.Context.MarkItemEntity.ViewLifeCircle.SetChildViewVisibility(8,e)}OnApplyModified(){var e,t,i=this.Context.MarkItemEntity.ViewLifeCircle;i.IsChildViewStateDirty(8)&&((e=this.GetComponent()).IsStart||e.IsShowOrShowing||e.IsHideOrHiding)&&(t=i.IsChildViewVisible(8),i.SetChildViewVisibleClean(8),e.SetPointerType(i.VerticalPointerType),e.SetActive(t))}OnDispose(){this.DestroyComponent(),super.OnDispose()}}exports.MarkItemVerticalPointerHandle=MarkItemVerticalPointerHandle;
//# sourceMappingURL=MarkItemVerticlePointerHandle.js.map