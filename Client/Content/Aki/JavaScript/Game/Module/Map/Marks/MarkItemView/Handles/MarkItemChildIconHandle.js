
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MarkItemChildIconHandle=void 0;const ConfigManager_1=require("../../../../../Manager/ConfigManager"),WorldMapDefine_1=require("../../../../WorldMap/WorldMapDefine"),MarkChildIconComponent_1=require("../Components/MarkChildIconComponent"),MarkItemComponentHandle_1=require("./MarkItemComponentHandle");class MarkItemChildIconHandle extends MarkItemComponentHandle_1.MarkItemComponentHandle{constructor(){super(...arguments),this.ComponentInternal=void 0}OnUpdate(){var e=this.Context.MarkItem;e.ShowSecondaryUiMultiMapIcon()?(this.SetVisible(!0),this.Context.MarkItemEntity.Resource.ChildIconPath=ConfigManager_1.ConfigManager.UiResourceConfig.GetResourcePath(e.IsSelectThisFloor?WorldMapDefine_1.MULTI_MAP_SELECT_ICON_PATH:WorldMapDefine_1.MULTI_MAP_ICON_PATH)):this.SetVisible(!1)}GetComponent(){return void 0===this.ComponentInternal&&(this.ComponentInternal=new MarkChildIconComponent_1.MarkChildIconComponent,this.ComponentInternal.CreateByPoolResourceIdAsync("UiItem_MarkChildNode_Prefab",this.Context.MarkComponentContainer).then(()=>{this.ApplyModified()})),this.ComponentInternal}DestroyComponent(){void 0!==this.ComponentInternal&&(this.ComponentInternal.RecycleToPool(),this.ComponentInternal=void 0)}OnSetVisible(e){this.Context.MarkItemEntity.ViewLifeCircle.SetChildViewVisibility(7,e)}OnApplyModified(){var e=this.Context.MarkItemEntity.ViewLifeCircle,i=e.IsChildViewVisible(7),t=this.Context.MarkItemEntity.Resource.IsChildIconPathDirty;if(i&&t){var t=this.GetComponent();if(!t.IsStart&&!t.IsShowOrShowing&&!t.IsHideOrHiding)return;t.Icon=this.Context.MarkItemEntity.Resource.ChildIconPath}e.IsChildViewStateDirty(7)&&((t=this.GetComponent()).IsStart||t.IsShowOrShowing||t.IsHideOrHiding)&&(e.SetChildViewVisibleClean(7),t.SetActive(i))}OnDispose(){this.DestroyComponent(),super.OnDispose()}}exports.MarkItemChildIconHandle=MarkItemChildIconHandle;
//# sourceMappingURL=MarkItemChildIconHandle.js.map