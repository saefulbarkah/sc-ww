
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScorePanel=void 0;const UE=require("ue"),Stats_1=require("../../../../../Core/Common/Stats"),EventDefine_1=require("../../../../Common/Event/EventDefine"),EventSystem_1=require("../../../../Common/Event/EventSystem"),ConfigManager_1=require("../../../../Manager/ConfigManager"),ModelManager_1=require("../../../../Manager/ModelManager"),FarmGoldController_1=require("../../../Activity/ActivityContent/FarmGold/FarmGoldController"),DreamLinkScoreItem_1=require("../ScoreItem/DreamLinkScoreItem"),FarmGoldScoreItem_1=require("../ScoreItem/FarmGoldScoreItem"),LinkScoreItem_1=require("../ScoreItem/LinkScoreItem"),RogueScoreItem_1=require("../ScoreItem/RogueScoreItem"),BattleChildViewPanel_1=require("./BattleChildViewPanel");class ScorePanel extends BattleChildViewPanel_1.BattleChildViewPanel{constructor(){super(...arguments),this.vul=[],this.NRl=void 0,this.Q3l=void 0,this.Sul=(e,t)=>{t&&(t=ConfigManager_1.ConfigManager.BattleScoreConfig.GetBattleScoreConfig(e))&&this.FRl(t.Type)}}OnRegisterComponent(){this.ComponentRegisterInfos=[[0,UE.UIItem]]}async InitializeAsync(){ModelManager_1.ModelManager.BattleLinkModel?.CheckInBattleLink()?(await this.I1l(),await this.iel()):ModelManager_1.ModelManager.RoguelikeModel.CheckInRoguelike()||1===ModelManager_1.ModelManager.CreatureModel.GetInstanceId()||ModelManager_1.ModelManager.BossRushModel.CheckInBossRush()?await this.VRl(!0):FarmGoldController_1.FarmGoldController.CheckInFarmGold()&&await this.K3l()}Reset(){this.vul.length=0,this.NRl=void 0,this.Q3l=void 0,super.Reset()}OnBeforeDestroyImplement(){this.vul.length=0,this.NRl=void 0,this.Q3l=void 0}AddEvents(){EventSystem_1.EventSystem.Add(EventDefine_1.EEventName.BattleScoreEnableChanged,this.Sul)}RemoveEvents(){EventSystem_1.EventSystem.Remove(EventDefine_1.EEventName.BattleScoreEnableChanged,this.Sul)}FRl(e){6===e&&this.VRl(!1)}async VRl(e=!0){var t;this.NRl||(t=await this.NewDynamicChildViewByResourceId(this.RootItem,"UiItem_RogueScore",RogueScoreItem_1.RogueScoreItem),this.vul.push(t),this.NRl=t,e&&await t.HideAsync())}async K3l(){var e;this.Q3l||(e=await this.NewDynamicChildViewByResourceId(this.GetItem(0),"UiItem_FarmGoldScore",FarmGoldScoreItem_1.FarmGoldScoreItem),this.vul.push(e),await(this.Q3l=e).ShowAsync(),e.IsScoreEnable=!0)}async I1l(){var e=await this.NewDynamicChildViewByResourceId(this.RootItem,"UiItem_RogueScoreC",DreamLinkScoreItem_1.DreamLinkScoreItem);this.vul.push(e),await e.HideAsync()}async iel(){var e=await this.NewDynamicChildViewByResourceId(this.RootItem,"UiItem_RogueScoreB",LinkScoreItem_1.LinkScoreItem);this.vul.push(e),await e.HideAsync()}OnShowBattleChildViewPanel(e){if(e)for(const t of this.vul)t.OnShowFirstTime()}OnTickBattleChildViewPanel(e){for(const t of this.vul)t.IsScoreEnable&&t.OnTick(e)}}(exports.ScorePanel=ScorePanel).Ult=Stats_1.Stat.Create("[BattleView]ScorePanelTick");
//# sourceMappingURL=ScorePanel.js.map