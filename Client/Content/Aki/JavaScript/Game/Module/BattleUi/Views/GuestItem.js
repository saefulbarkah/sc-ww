
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GuestItem=void 0;const UE=require("ue"),PlotGuestByGuestID_1=require("../../../../Core/Define/ConfigQuery/PlotGuestByGuestID"),EventDefine_1=require("../../../Common/Event/EventDefine"),EventSystem_1=require("../../../Common/Event/EventSystem"),ModelManager_1=require("../../../Manager/ModelManager"),BattleChildView_1=require("./BattleChildView/BattleChildView");class GuestItem extends BattleChildView_1.BattleChildView{constructor(){super(...arguments),this.mcc=void 0,this.fcc=!1,this.gcc=(e,t)=>{if(t)if(e.WhoId&&this.mcc?.has(e.WhoId)){if(!this.fcc){this.fcc=!0;var i=this.GetItem(1).GetOwner().K2_GetComponentsByClass(UE.LGUIPlayTweenComponent.StaticClass());for(let e=0;e<i.Num();e++)i.Get(e).Play()}}else this.Ccc()},this.Ccc=()=>{if(this.fcc){this.fcc=!1;var t=this.GetItem(2).GetOwner().K2_GetComponentsByClass(UE.LGUIPlayTweenComponent.StaticClass());for(let e=0;e<t.Num();e++)t.Get(e).Play()}}}OnRegisterComponent(){this.ComponentRegisterInfos=[[0,UE.UITexture],[1,UE.UIItem],[2,UE.UIItem]]}OnShowBattleChildView(){EventSystem_1.EventSystem.Add(EventDefine_1.EEventName.PlotShowTalk,this.gcc),EventSystem_1.EventSystem.Add(EventDefine_1.EEventName.PlotEndShowTalk,this.Ccc)}OnHideBattleChildView(){EventSystem_1.EventSystem.Remove(EventDefine_1.EEventName.PlotShowTalk,this.gcc),EventSystem_1.EventSystem.Remove(EventDefine_1.EEventName.PlotEndShowTalk,this.Ccc)}async OnBeforeStartAsync(){var e=ModelManager_1.ModelManager.BattleUiModel.GuestId;0!==e&&await this.SetGuest(e)}async SetGuest(e){var e=PlotGuestByGuestID_1.configPlotGuestByGuestID.GetConfig(e),t=e.HeadIconPath;this.mcc=new Set(e.SpeakerID),await this.SetTextureAsync(t,this.GetTexture(0))}}exports.GuestItem=GuestItem;
//# sourceMappingURL=GuestItem.js.map