
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MissionViewStepTextUtil=void 0;const MultiTextLang_1=require("../../../../../Core/Define/ConfigQuery/MultiTextLang"),StringUtils_1=require("../../../../../Core/Utils/StringUtils"),PublicUtil_1=require("../../../../Common/PublicUtil"),ConfigManager_1=require("../../../../Manager/ConfigManager"),ModelManager_1=require("../../../../Manager/ModelManager"),GeneralLogicTreeController_1=require("../../../GeneralLogicTree/GeneralLogicTreeController");class MissionViewStepTextUtil{static GetStepTextByConfig(e,t){switch(t.ShowSource){case 0:return GeneralLogicTreeController_1.GeneralLogicTreeController.GetTitleText(e,t);case 1:return MissionViewStepTextUtil.HU_(t)}return""}static HU_(e){let t="";var i,r=e.QuestScheduleType;return r&&"FishingEntrust"===r.Type&&(r=MultiTextLang_1.configMultiTextLang.GetLocalTextNew(e.TidTitle)??"",i=(i=ModelManager_1.ModelManager.DockyardModel.GetItemCountByItemId(e.ProgressTargetId))<(e=MissionViewStepTextUtil.GetEntrustProgressTotalCount(e.ProgressTargetId))?i:e,t=r.replace("{0}",e.toString())+`(${i}/${e})`),t}static GetEntrustProgressTotalCount(e){var t=ModelManager_1.ModelManager.FishingQuestModel.CurrentTraceEntrust;return!t||2===(t=ConfigManager_1.ConfigManager.FishingConfig.GetFishingEntrust(t)).EntrustType?0:t.EntrustTarget.get(e)??0}static CheckStepTextSame(e,t){return e?.TidTitle===t?.TidTitle}static CheckTextEqual(t,i){if(t!==i){if(!t||!i)return!1;if(!MissionViewStepTextUtil.CheckStepTextSame(t.MainStepText,i.MainStepText))return!1;if(t.SubStepTexts!==i.SubStepTexts){if(!t.SubStepTexts||!i.SubStepTexts)return!1;if(t.SubStepTexts?.length!==i.SubStepTexts?.length)return!1;for(let e=0;e<t.SubStepTexts.length;e++){var r=t.SubStepTexts[e];if(!MissionViewStepTextUtil.CheckStepTextSame(r,i.SubStepTexts[e]))return!1}}}return!0}static CheckShowConfigEmpty(e){if(e.TitleTextKey){var t=PublicUtil_1.PublicUtil.GetConfigTextByKey(e.TitleTextKey);if(!StringUtils_1.StringUtils.IsBlank(t))return!1}if(e.MainStepText&&e.MainStepText.TidTitle){t=PublicUtil_1.PublicUtil.GetConfigTextByKey(e.MainStepText.TidTitle);if(!StringUtils_1.StringUtils.IsBlank(t))return!1}if(e.SubStepTexts)for(const r of e.SubStepTexts)if(r.TidTitle){var i=PublicUtil_1.PublicUtil.GetConfigTextByKey(r.TidTitle);if(!StringUtils_1.StringUtils.IsBlank(i))return!1}return!0}}exports.MissionViewStepTextUtil=MissionViewStepTextUtil;
//# sourceMappingURL=MissionViewStepTextUtil.js.map