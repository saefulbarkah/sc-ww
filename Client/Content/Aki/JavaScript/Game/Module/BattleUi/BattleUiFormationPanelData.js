
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BattleUiFormationPanelData=exports.FormationItemData=void 0;const Log_1=require("../../../Core/Common/Log"),ControllerHolder_1=require("../../Manager/ControllerHolder"),ModelManager_1=require("../../Manager/ModelManager"),InputMappingsDefine_1=require("../../Ui/InputDistribute/InputMappingsDefine"),actionNames=[InputMappingsDefine_1.actionMappings.切换角色1,InputMappingsDefine_1.actionMappings.切换角色2,InputMappingsDefine_1.actionMappings.切换角色3,InputMappingsDefine_1.actionMappings.切换角色4];class FormationItemData{constructor(){this.PlayerId=0,this.RoleId=0,this.RoleSkinId=0,this.CreatureDataId=0}}exports.FormationItemData=FormationItemData;class BattleUiFormationPanelData{constructor(){this.HIt=void 0,this.qk_=new Map,this.PositionItemMap=new Map}Init(){}Clear(){this.PositionItemMap.clear()}UpdateFormationPanelData(){this.PositionItemMap.clear();var t=ModelManager_1.ModelManager.PlayerInfoModel.GetId()??0,e=!ControllerHolder_1.ControllerHolder.GameModeController.IsInInstance();for(const o of ModelManager_1.ModelManager.GameModeModel.IsMulti?ModelManager_1.ModelManager.OnlineModel.GetAllWorldTeamPlayer():[t]){var a=ModelManager_1.ModelManager.SceneTeamModel.GetTeamPlayerData(o);if(a){a=a.GetGroup(1)?.GetRoleList();if(a)for(const n of a)this.PAl(o,n.RoleId,n.RoleSkinId,n.CreatureDataId)}else if(o!==t&&e){a=ModelManager_1.ModelManager.OnlineModel.GetWorldTeamPlayerFightInfo(o)?.RoleInfos;if(a)for(const r of a)this.PAl(o,r.RoleId,r.RoleSkinId)}}}PAl(t,e,a,o=void 0){var n=this.PositionItemMap.size+1,r=new FormationItemData;r.PlayerId=t,r.RoleId=e,r.RoleSkinId=a,void 0!==o&&(r.CreatureDataId=o),this.PositionItemMap.set(n,r)}GetItemData(t){return this.PositionItemMap.get(t)}GetRolePosition(t,e){for(var[a,o]of this.PositionItemMap)if(o.PlayerId===t&&o.RoleId===e)return a;return 0}GetActionNames(){return actionNames}SetInputType(t){Log_1.Log.CheckInfo()&&Log_1.Log.Info("Battle",48,"切换编队ActionInputHandler",["type",t]),this.HIt=this.qk_.get(t)}RegisterInputHandler(t,e){this.qk_.set(t,e)}GetInputHandler(){return this.HIt}}exports.BattleUiFormationPanelData=BattleUiFormationPanelData;
//# sourceMappingURL=BattleUiFormationPanelData.js.map