
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BattleUiFormationPanelData=exports.FormationItemData=void 0;const ControllerHolder_1=require("../../Manager/ControllerHolder"),ModelManager_1=require("../../Manager/ModelManager"),InputMappingsDefine_1=require("../../Ui/InputDistribute/InputMappingsDefine"),actionNames=[InputMappingsDefine_1.actionMappings.切换角色1,InputMappingsDefine_1.actionMappings.切换角色2,InputMappingsDefine_1.actionMappings.切换角色3,InputMappingsDefine_1.actionMappings.切换角色4];class FormationItemData{constructor(){this.PlayerId=0,this.RoleId=0,this.RoleSkinId=0,this.CreatureDataId=0}}exports.FormationItemData=FormationItemData;class BattleUiFormationPanelData{constructor(){this.PositionItemMap=new Map}Init(){}Clear(){this.PositionItemMap.clear()}UpdateFormationPanelData(){this.PositionItemMap.clear();var e=ModelManager_1.ModelManager.PlayerInfoModel.GetId()??0,t=!ControllerHolder_1.ControllerHolder.GameModeController.IsInInstance();for(const o of ModelManager_1.ModelManager.GameModeModel.IsMulti?ModelManager_1.ModelManager.OnlineModel.GetAllWorldTeamPlayer():[e]){var a=ModelManager_1.ModelManager.SceneTeamModel.GetTeamPlayerData(o);if(a){a=a.GetGroup(1)?.GetRoleList();if(a)for(const r of a)this.SAl(o,r.RoleId,r.RoleSkinId,r.CreatureDataId)}else if(o!==e&&t){a=ModelManager_1.ModelManager.OnlineModel.GetWorldTeamPlayerFightInfo(o)?.RoleInfos;if(a)for(const n of a)this.SAl(o,n.RoleId,n.RoleSkinId)}}}SAl(e,t,a,o=void 0){var r=this.PositionItemMap.size+1,n=new FormationItemData;n.PlayerId=e,n.RoleId=t,n.RoleSkinId=a,void 0!==o&&(n.CreatureDataId=o),this.PositionItemMap.set(r,n)}GetItemData(e){return this.PositionItemMap.get(e)}GetRolePosition(e,t){for(var[a,o]of this.PositionItemMap)if(o.PlayerId===e&&o.RoleId===t)return a;return 0}GetActionNames(){return actionNames}}exports.BattleUiFormationPanelData=BattleUiFormationPanelData;
//# sourceMappingURL=BattleUiFormationPanelData.js.map