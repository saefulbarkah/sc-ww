
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CommonQteModel=void 0;const UE=require("ue"),Log_1=require("../../../../Core/Common/Log"),ModelBase_1=require("../../../../Core/Framework/ModelBase"),ResourceSystem_1=require("../../../../Core/Resource/ResourceSystem"),DataTableUtil_1=require("../../../../Core/Utils/DataTableUtil"),CommonQteContext_1=require("./CommonQteContext"),DT_COMMON_QTE_PATH="/Game/Aki/Data/Qte/DT_CommonQte.DT_CommonQte";class CommonQteModel extends ModelBase_1.ModelBase{constructor(){super(...arguments),this.hJ=-1,this.ZEl=0,this.eIl=void 0,this.tIl=void 0,this.IsRefreshMode=!1}OnLeaveLevel(){return this.tIl?.clear(),!(this.eIl=void 0)}StartQte(e,t=void 0,o=void 0,r=0){var s=new CommonQteContext_1.CommonQteContext,i=this.GetQteConfig(e);if(i)return s.QteId=e,s.HandleId=this.ZEl++,s.SetConfig(i),s.SuccessCallback=t,s.FailCallback=o,s.Source=r,this.hJ=s.HandleId,this.tIl||(this.tIl=new Map),this.tIl.set(s.HandleId,s),s}GetQteConfig(e){this.eIl||(this.eIl=ResourceSystem_1.ResourceSystem.GetLoadedAsset(DT_COMMON_QTE_PATH,UE.DataTable));var t=DataTableUtil_1.DataTableUtil.GetDataTableRow(this.eIl,e.toString());return t||Log_1.Log.CheckError()&&Log_1.Log.Error("CommonQte",67,"找不到通用QTE配置",["Id",e]),t}GetQteHandle(){return this.hJ}ClearQteHandle(){this.hJ=-1}GetQteContext(e){return this.tIl?.get(e)}}exports.CommonQteModel=CommonQteModel;
//# sourceMappingURL=CommonQteModel.js.map