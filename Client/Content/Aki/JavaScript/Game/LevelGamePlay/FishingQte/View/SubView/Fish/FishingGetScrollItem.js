
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FishingGetScrollItem=void 0;const UE=require("ue"),ConfigManager_1=require("../../../../../Manager/ConfigManager"),ModelManager_1=require("../../../../../Manager/ModelManager"),LevelSequencePlayer_1=require("../../../../../Module/Common/LevelSequencePlayer"),ListSliderControl_1=require("../../../../../Module/ItemHint/Views/ListSliderControl"),LguiUtil_1=require("../../../../../Module/Util/LguiUtil"),PreloadConfigStatementPart1_1=require("../../../../../Preload/PreloadConfigStatementPart1"),UiPanelBase_1=require("../../../../../Ui/Base/UiPanelBase"),MAX_LIST_COUNT=7,ITEM_INTERVAL_TIME=200,ITEM_SILDER_TIME=200,SPECIAL_QUALITY_ID=5;class FishingGetScrollItem extends UiPanelBase_1.UiPanelBase{constructor(){super(...arguments),this.ListSlideControl=void 0,this.wOt=()=>MAX_LIST_COUNT,this.r0i=()=>!ModelManager_1.ModelManager.FishingQteModel.IsTempGetDataEmpty(),this.s0i=()=>ITEM_INTERVAL_TIME,this.HDe=()=>{}}OnRegisterComponent(){this.ComponentRegisterInfos=[[0,UE.UIVerticalLayout],[1,UE.UIItem]]}OnStart(){var e=PreloadConfigStatementPart1_1.configCommonParamById.GetIntConfig("FishingQteGetListItemShowTime");this.ListSlideControl=new ListSliderControl_1.ListSliderControl(FishingGetItem,this.GetItem(1),this.wOt,this.r0i,this.s0i,this.HDe,1,e,ITEM_SILDER_TIME,1),this.ListSlideControl.DisEnableParentLayout()}OnTick(e){this.ListSlideControl?.Tick(e)}}exports.FishingGetScrollItem=FishingGetScrollItem;class FishingGetItem extends ListSliderControl_1.SliderItem{constructor(){super(...arguments),this.LevelSequencePlayer=void 0,this.Data=void 0,this.TagItem=void 0,this.K3t=e=>{"Start"===e?this.FinishPlayStart():"Close"===e&&this.FinishPlayEnd()}}OnRegisterComponent(){this.ComponentRegisterInfos=[[0,UE.UISprite],[1,UE.UITexture],[2,UE.UIText],[3,UE.UIItem],[4,UE.UIItem],[5,UE.UIItem]]}async OnBeforeStartAsync(){var e=this.GetItem(3);this.TagItem=new FishingGetTagItem,await this.TagItem.CreateByActorAsync(e.GetOwner())}OnStart(){this.LevelSequencePlayer=new LevelSequencePlayer_1.LevelSequencePlayer(this.RootItem),this.LevelSequencePlayer.BindSequenceCloseEvent(this.K3t)}OnBeforeDestroy(){this.LevelSequencePlayer&&(this.LevelSequencePlayer.Clear(),this.LevelSequencePlayer=void 0)}PlayStart(){this.LevelSequencePlayer.PlayLevelSequenceByName("Start")}PlayEnd(){this.LevelSequencePlayer.PlayLevelSequenceByName("Close")}OnActiveStatusChange(e){}async AsyncLoadUiResource(){this.Data=ModelManager_1.ModelManager.FishingQteModel.ShiftTempGetData(),this.Data&&await this.Refresh(this.Data)}async Refresh(e){var t=ConfigManager_1.ConfigManager.FishingConfig.GetFishingItemConfig(e.ItemId),t=(this.BGt(e.Quality),LguiUtil_1.LguiUtil.SetLocalTextNew(this.GetText(2),t.Name),await this.SetTextureAsync(t.Icon,this.GetTexture(1)),ModelManager_1.ModelManager.FishingQteModel.GetTempGetDataTag(e.IncId)),e=0!==t;this.TagItem.SetActive(e),e&&this.TagItem.RefreshTag(t)}BGt(e){var t=ConfigManager_1.ConfigManager.FishingConfig.GetFishingQualityConfig(e);const i=this.GetSprite(0);i.SetUIActive(!1),this.SetSpriteByPath(t.TexBg,i,!1,void 0,e=>{i.SetUIActive(!0)});t=UE.Color.FromHex(t.TxtColor),this.GetText(2).SetColor(t),t=e===SPECIAL_QUALITY_ID;this.GetItem(4).SetUIActive(t),this.GetItem(5).SetUIActive(!t)}}class FishingGetTagItem extends UiPanelBase_1.UiPanelBase{OnRegisterComponent(){this.ComponentRegisterInfos=[[0,UE.UISprite],[1,UE.UIText]]}RefreshTag(e){let t=void 0,i=void 0,a=void 0;switch(e){case 2:t="Reward_Tag_Extra",i=PreloadConfigStatementPart1_1.configCommonParamById.GetStringConfig("Reward_Tag_Extra_Bg_Color"),a=PreloadConfigStatementPart1_1.configCommonParamById.GetStringConfig("Reward_Tag_Extra_Text_Color");break;case 1:t="Reward_Tag_Magnification",i=PreloadConfigStatementPart1_1.configCommonParamById.GetStringConfig("Reward_Tag_Magnification_Bg_Color"),a=PreloadConfigStatementPart1_1.configCommonParamById.GetStringConfig("Reward_Tag_Magnification_Text_Color")}t&&this.GetText(1).ShowTextNew(t),a&&this.GetText(1).SetColor(UE.Color.FromHex(a)),i&&this.GetSprite(0).SetColor(UE.Color.FromHex(i))}}
//# sourceMappingURL=FishingGetScrollItem.js.map