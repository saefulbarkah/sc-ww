
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FishingProgressItem=void 0;const UE=require("ue"),Rotator_1=require("../../../../../Core/Utils/Math/Rotator"),MathUtils_1=require("../../../../../Core/Utils/MathUtils"),UiPanelBase_1=require("../../../../Ui/Base/UiPanelBase"),PROGRESS_START_ANGLE=-77,PROGRESS_END_ANGLE=0,PAUSE_TIME=0,MIN_ANIM_TIME=100;class FishingProgressItem extends UiPanelBase_1.UiPanelBase{constructor(){super(...arguments),this.GameConfig=void 0,this.GameInfo=void 0,this.cce=Rotator_1.Rotator.Create(),this.sc_=Rotator_1.Rotator.Create(),this.Dt_=void 0,this.Bt_=void 0,this.ac_=void 0,this.hc_=void 0,this.lc_=!1,this.Vbn=0,this._c_=0,this.K1t=0}OnRegisterComponent(){this.ComponentRegisterInfos=[[0,UE.UIText],[1,UE.UIItem],[2,UE.UIItem],[3,UE.UIItem],[4,UE.UIItem]]}Init(t,s){this.GameInfo=s,this.GameConfig=t,this.K1t=Math.max(t.HitColdTime,MIN_ANIM_TIME)}OnStart(){this.Dt_=this.GetItem(1),this.Bt_=this.GetItem(3),this.ac_=this.GetItem(4),this.hc_=this.GetItem(2)}OnBeforeDestroy(){this.Dt_=void 0,this.Bt_=void 0,this.hc_=void 0}OnTick(t){var s=this.cc_();this.uc_(s,t),this.Nqe(s)}Nqe(t){var s=Math.ceil(100*t);this.GetText(0).SetText(s+"%"),this.cce.Yaw=MathUtils_1.MathUtils.Lerp(PROGRESS_START_ANGLE,PROGRESS_END_ANGLE,t),this.Dt_?.SetUIRelativeRotation(this.cce.ToUeRotator()),this.Bt_?.SetUIRelativeRotation(this.cce.ToUeRotator()),this.ac_?.SetUIRelativeRotation(this.cce.ToUeRotator())}uc_(t,s){let i=t;this.lc_&&(this.Vbn+=s,i=PAUSE_TIME<this.Vbn&&this.Vbn<=PAUSE_TIME+this.K1t?(s=(this.Vbn-PAUSE_TIME)/this.K1t,MathUtils_1.MathUtils.Lerp(this._c_,t,s)):(this.lc_=!1,t)),this.sc_.Yaw=MathUtils_1.MathUtils.Lerp(PROGRESS_START_ANGLE,PROGRESS_END_ANGLE,i),this.hc_?.SetUIRelativeRotation(this.sc_.ToUeRotator())}cc_(){var t=this.GameInfo.CurrentScore,s=this.GameConfig.MaxScore;return MathUtils_1.MathUtils.Clamp(t/s,0,1)}StartAnimProgress(){this._c_=this.cc_(),this.Vbn=0,this.lc_=!0}EnterNextRound(){this._c_=0}}exports.FishingProgressItem=FishingProgressItem;
//# sourceMappingURL=FishingProgressItem.js.map