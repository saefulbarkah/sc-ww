
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LevelEventPreloadRole=void 0;const Log_1=require("../../../Core/Common/Log"),ModelManager_1=require("../../Manager/ModelManager"),WaitEntityTask_1=require("../../World/Define/WaitEntityTask"),LevelGeneralBase_1=require("../LevelGeneralBase"),WAITE_ENTITY_PRELOAD_TIME=6e4;class LevelEventPreloadRole extends LevelGeneralBase_1.LevelEventBase{ExecuteInGm(e,o){this.FinishExecute(!0)}ExecuteNew(e,o){var e=e.PreloadObjectType,a=[];if("PreloadTrialCharacterForSkill"===e.Type)for(const r of e.CharacterGroupNew)a.push(r.CharacterId);e=ModelManager_1.ModelManager.SceneTeamModel.GetPreloadCreatureDataIdList(a);e.length<=0?(Log_1.Log.CheckInfo()&&Log_1.Log.Info("Event",48,"[PreloadRole] 无预加载实体",["RoleIdList",a]),this.FinishExecute(!0)):(Log_1.Log.CheckInfo()&&Log_1.Log.Info("Event",48,"[PreloadRole] 开始等待实体加载",["CreatureDataIdList",e]),this.CreateWaitEntityTaskBigInt(e),WaitEntityTask_1.WaitEntityTask.Create(e,e=>{Log_1.Log.CheckInfo()&&Log_1.Log.Info("Event",48,"[PreloadRole] 实体加载结束",["Result",e]),this.FinishExecute(!0)},WAITE_ENTITY_PRELOAD_TIME))}}exports.LevelEventPreloadRole=LevelEventPreloadRole;
//# sourceMappingURL=LevelEventPreloadRole.js.map