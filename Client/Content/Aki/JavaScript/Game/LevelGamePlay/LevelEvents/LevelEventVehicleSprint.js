
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LevelEventVehicleSprint=void 0;const Log_1=require("../../../Core/Common/Log"),Global_1=require("../../Global"),ModelManager_1=require("../../Manager/ModelManager"),LevelGeneralBase_1=require("../LevelGeneralBase");class LevelEventVehicleSprint extends LevelGeneralBase_1.LevelEventBase{constructor(){super(...arguments),this.Jh=void 0,this.OPt=void 0}ExecuteNew(e,t){if(this.OPt=e,this.OPt)switch(this.OPt.TargetVehicle.Type){case"Current":this.Jh=this.Fhc(),this.jhc();break;case"Appointed":this.CreateWaitEntityTask(this.OPt.TargetVehicle.VehicleId);break;default:Log_1.Log.CheckError()&&Log_1.Log.Error("LevelEvent",50,"不支持的目标类型",["Type",this.OPt.TargetVehicle.Type])}}ExecuteWhenEntitiesReady(){this.Vhc(this.OPt.TargetVehicle),this.jhc()}Vhc(e){switch(e.Type){case"Current":this.Jh=this.Fhc();break;case"Appointed":this.Jh=ModelManager_1.ModelManager.CreatureModel.GetEntityByPbDataId(e.VehicleId)?.Entity;break;default:Log_1.Log.CheckError()&&Log_1.Log.Error("LevelEvent",50,"不支持的目标类型",["Type",e.Type])}}Fhc(){if(Global_1.Global.BaseCharacter)return Global_1.Global.BaseCharacter.CharacterActorComponent.Entity.GetComponent(226)?.VehicleEntity;Log_1.Log.CheckError()&&Log_1.Log.Error("LevelEvent",50,"获取玩家载具失败，找不到全局玩家角色")}jhc(){if(this.Jh){var e=this.Jh?.GetComponent(230);if(e)switch(e.VehicleType){case"Gongduola":case"FishingBoat":e?.TryEnterSprint(!0)}}else Log_1.Log.CheckError()&&Log_1.Log.Error("LevelEvent",50,"载具执行冲刺失败，无法找到目标实体")}}exports.LevelEventVehicleSprint=LevelEventVehicleSprint;
//# sourceMappingURL=LevelEventVehicleSprint.js.map