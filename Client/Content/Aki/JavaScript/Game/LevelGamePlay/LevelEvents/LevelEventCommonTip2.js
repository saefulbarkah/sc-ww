
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LevelEventCommonTip2=void 0;const IAction_1=require("../../../UniverseEditor/Interface/IAction"),EventDefine_1=require("../../Common/Event/EventDefine"),EventSystem_1=require("../../Common/Event/EventSystem"),ModelManager_1=require("../../Manager/ModelManager"),InputDistributeController_1=require("../../Ui/InputDistribute/InputDistributeController"),UiManager_1=require("../../Ui/UiManager"),LevelEventLockInputState_1=require("../LevelEventLockInputState"),LevelGeneralBase_1=require("../LevelGeneralBase"),BLOCK_INPUTTAG="BlockAllInputTag";class LevelEventCommonTip2 extends LevelGeneralBase_1.LevelEventBase{constructor(){super(...arguments),this.WDe=void 0,this.H2l=!1,this.t6l=()=>{this.FinishExecute(!0)}}ExecuteNew(e,t){e&&(e=e.TipOption).Type===IAction_1.ECommonTip2Type.PrepareCountdown&&(this.H2l=e.IsBlockPlayer??!1,this.H2l&&(LevelEventLockInputState_1.LevelEventLockInputState.IsLockInput()?(LevelEventLockInputState_1.LevelEventLockInputState.InputTagNames.push(BLOCK_INPUTTAG),InputDistributeController_1.InputDistributeController.RefreshInputTag()):(ModelManager_1.ModelManager.InputDistributeModel.SetInputDistributeTag(BLOCK_INPUTTAG),LevelEventLockInputState_1.LevelEventLockInputState.Lock([BLOCK_INPUTTAG]))),this.WDe="LevelGamePlayPrepareCountDown",e={CountDownNum:e.CountDownNum,TidText:e.TidCountDownTxt},UiManager_1.UiManager.OpenView(this.WDe,e),this.IsAsync?this.FinishExecute(!0):EventSystem_1.EventSystem.Add(EventDefine_1.EEventName.LevelGamePlayPrepareCountDownEnd,this.t6l))}OnFinish(){EventSystem_1.EventSystem.Remove(EventDefine_1.EEventName.LevelGamePlayPrepareCountDownEnd,this.t6l),this.H2l&&(LevelEventLockInputState_1.LevelEventLockInputState.Unlock(),InputDistributeController_1.InputDistributeController.RefreshInputTag()),this.H2l=!1}}exports.LevelEventCommonTip2=LevelEventCommonTip2;
//# sourceMappingURL=LevelEventCommonTip2.js.map