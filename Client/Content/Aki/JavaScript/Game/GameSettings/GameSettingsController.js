
"use strict";var _a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.GameSettingsController=void 0;const UE=require("ue"),Info_1=require("../../Core/Common/Info"),Log_1=require("../../Core/Common/Log"),ControllerBase_1=require("../../Core/Framework/ControllerBase"),Macro_1=require("../../Core/Preprocessor/Macro"),TimerSystem_1=require("../../Core/Timer/TimerSystem"),LauncherGameSettingLib_1=require("../../Launcher/Util/LauncherGameSettingLib"),EventDefine_1=require("../Common/Event/EventDefine"),EventSystem_1=require("../Common/Event/EventSystem"),LocalStorage_1=require("../Common/LocalStorage"),LocalStorageDefine_1=require("../Common/LocalStorageDefine"),GlobalData_1=require("../GlobalData"),CloudGameManager_1=require("../Manager/CloudGameManager"),ConfigManager_1=require("../Manager/ConfigManager"),ModelManager_1=require("../Manager/ModelManager"),MenuTool_1=require("../Module/Menu/MenuTool"),GameSettingsDeviceRender_1=require("./GameSettingsDeviceRender"),GameSettingsDeviceRenderDefine_1=require("./GameSettingsDeviceRenderDefine"),GameSettingsLevelRender_1=require("./GameSettingsLevelRender"),GameSettingsManager_1=require("./GameSettingsManager"),GameSettingsUtils_1=require("./GameSettingsUtils");class GameSettingsController extends ControllerBase_1.ControllerBase{static OnInit(){return Log_1.Log.CheckInfo()&&Log_1.Log.Info("Render",40,"GameSettingsController-OnInit"),this.Ore(),!0}static OnClear(){return this.kre(),!0}static Ore(){EventSystem_1.EventSystem.Add(EventDefine_1.EEventName.OnStartLoadingState,this.hMe),EventSystem_1.EventSystem.Add(EventDefine_1.EEventName.WorldDone,this._Me),EventSystem_1.EventSystem.Add(EventDefine_1.EEventName.ClearWorld,this.uMe),EventSystem_1.EventSystem.Add(EventDefine_1.EEventName.OnSubLevelAdded,this.XGa),EventSystem_1.EventSystem.Add(EventDefine_1.EEventName.InputControllerMainTypeChange,this.Etl),EventSystem_1.EventSystem.Add(EventDefine_1.EEventName.UiPureModeChangedForSettingSystem,this.KRl)}static kre(){EventSystem_1.EventSystem.Remove(EventDefine_1.EEventName.OnStartLoadingState,this.hMe),EventSystem_1.EventSystem.Remove(EventDefine_1.EEventName.WorldDone,this._Me),EventSystem_1.EventSystem.Remove(EventDefine_1.EEventName.ClearWorld,this.uMe),EventSystem_1.EventSystem.Remove(EventDefine_1.EEventName.OnSubLevelAdded,this.XGa),EventSystem_1.EventSystem.Remove(EventDefine_1.EEventName.InputControllerMainTypeChange,this.Etl),EventSystem_1.EventSystem.Remove(EventDefine_1.EEventName.UiPureModeChangedForSettingSystem,this.KRl)}static kot(){this.IRe=TimerSystem_1.TimerSystem.Delay(this.q7e,GameSettingsDeviceRenderDefine_1.WHOLE_SHADOW_CACHE_DELAY_TIME)}static xHe(){this.IRe&&(TimerSystem_1.TimerSystem.Has(this.IRe)&&TimerSystem_1.TimerSystem.Remove(this.IRe),this.IRe=void 0)}static get Gh_(){let e=GameSettingsManager_1.GameSettingsManager.GetCurrentValue(10);return e=4!==e||GameSettingsDeviceRender_1.GameSettingsDeviceRender.IsPcPlatformVeryHigh()?e:ConfigManager_1.ConfigManager.MenuBaseConfig.GetMenuConfigByFunctionId(10).OptionsDefault}static SNa(){if(LocalStorage_1.LocalStorage.GetGlobal(LocalStorageDefine_1.ELocalStorageGlobalKey.HasLocalGameSettings,!1)){if(Log_1.Log.CheckInfo()&&Log_1.Log.Info("GameSettings",64,"本地有游戏设置保存，还原本地游戏设置"),!GameSettingsUtils_1.GameSettingsUtils.PreApplyImageQuality(this.Gh_))return;GameSettingsUtils_1.GameSettingsUtils.ApplySceneLightQuality(GameSettingsManager_1.GameSettingsManager.GetCurrentValue(10));for(const i of GameSettingsManager_1.GameSettingsManager.GetGameSettingsHandleMap().values())i.Load()&&(i.IsSkipInitializeApply?Log_1.Log.CheckInfo()&&Log_1.Log.Info("GameSettings",64,"初始化应用游戏设置 - 跳过此设置应用",["GameSettingId",i.GetGameSettingId()]):i.InitializeApply());CloudGameManager_1.CloudGameManager.IsCloudGame&&(e=GameSettingsDeviceRender_1.GameSettingsDeviceRender.GetRecommendQualityLv(),a=GameSettingsDeviceRender_1.GameSettingsDeviceRender.GetDeviceReaderFeatureData(e),GameSettingsUtils_1.GameSettingsUtils.ApplyImageQuality(e),Log_1.Log.CheckInfo())&&Log_1.Log.Info("GameSettings",64,"初始化游戏设置 - 云游戏覆盖画质设置",["qualityLevel",e],["deviceReaderFeatureData",a])}else{Log_1.Log.CheckInfo()&&Log_1.Log.Info("GameSettings",64,"首次启动游戏，应用默认游戏设置"),this.pnh=LocalStorage_1.LocalStorage.GetGlobal(LocalStorageDefine_1.ELocalStorageGlobalKey.GameQualitySetting);var e=LauncherGameSettingLib_1.LauncherGameSettingLib.LoadPlayMenuInfo();this.vnh=new Map,void 0!==this.pnh&&this.pnh.KeyQualityLevel<=3&&(Log_1.Log.CheckInfo()&&Log_1.Log.Info("GameSettings",63,"[设置系统]->存在老数据，进行兼容设置"),GameSettingsUtils_1.GameSettingsUtils.PreApplyImageQuality(this.pnh.KeyQualityLevel),a=LocalStorage_1.LocalStorage.GetGlobal(LocalStorageDefine_1.ELocalStorageGlobalKey.CameraShakeStrength),this.vnh.set(68,this.pnh.KeySuperResolution),this.vnh.set(5,this.pnh.KeyPcWindowMode),this.vnh.set(7,this.pnh.KeyBrightness),this.vnh.set(87,this.pnh.KeyFsrEnable),this.vnh.set(125,this.pnh.KeyXessEnable??1),this.vnh.set(126,this.pnh.KeyXessQuality??2),this.vnh.set(127,this.pnh.KeyMetalFxEnable),this.vnh.set(128,this.pnh.KeyIrxEnable??1),this.vnh.set(89,this.pnh.HorizontalViewSensitivity),this.vnh.set(90,this.pnh.VerticalViewSensitivity),this.vnh.set(91,this.pnh.AimHorizontalViewSensitivity),this.vnh.set(92,this.pnh.AimVerticalViewSensitivity),this.vnh.set(93,a),this.vnh.set(94,this.pnh.MobileHorizontalViewSensitivity),this.vnh.set(95,this.pnh.MobileVerticalViewSensitivity),this.vnh.set(96,this.pnh.MobileAimHorizontalViewSensitivity),this.vnh.set(97,this.pnh.MobileAimVerticalViewSensitivity),this.vnh.set(99,this.pnh.CommonSpringArmLength),this.vnh.set(100,this.pnh.FightSpringArmLength),this.vnh.set(101,this.pnh.IsResetFocusEnable),this.vnh.set(102,this.pnh.IsSidestepCameraEnable),this.vnh.set(103,this.pnh.IsSoftLockCameraEnable),this.vnh.set(104,this.pnh.JoystickShakeStrength),this.vnh.set(105,this.pnh.JoystickShakeType),this.vnh.set(108,this.pnh.JoystickMode),this.vnh.set(109,this.pnh.IsAutoSwitchSkillButtonMode),this.vnh.set(122,this.pnh.AimAssistEnable),this.vnh.set(130,this.pnh.HorizontalViewRevert),this.vnh.set(131,this.pnh.VerticalViewRevert),this.vnh.set(106,this.pnh.WalkOrRunRate)),void 0!==e&&(this.vnh.set(1,e?.get(1)),this.vnh.set(2,e?.get(2)),this.vnh.set(3,e?.get(3)),this.vnh.set(4,e?.get(4)),this.vnh.set(69,e?.get(69)),this.vnh.set(70,e?.get(70))),this.ENa(),this.yNa(),GameSettingsManager_1.GameSettingsManager.InitSetApplySave(129,1),GameSettingsManager_1.GameSettingsManager.InitSetApplySave(134,1)}if(void 0===GameSettingsManager_1.GameSettingsManager.GetCurrentValue(831)||LocalStorage_1.LocalStorage.GetGlobal(LocalStorageDefine_1.ELocalStorageGlobalKey.HasRefreshNvidiaDlssQuality)||GameSettingsManager_1.GameSettingsManager.SetApplySave(831,99),LocalStorage_1.LocalStorage.SetGlobal(LocalStorageDefine_1.ELocalStorageGlobalKey.HasRefreshNvidiaDlssQuality,!0),CloudGameManager_1.CloudGameManager.IsCloudGame&&(GameSettingsManager_1.GameSettingsManager.SetApplySave(81,1),GameSettingsManager_1.GameSettingsManager.SetApplySave(831,0),Log_1.Log.CheckInfo())&&Log_1.Log.Info("GameSettings",58,"初始化游戏设置 - 云游戏开启DLSS平衡"),Info_1.Info.IsPs5Platform()){Log_1.Log.CheckInfo()&&Log_1.Log.Info("GameSettings",64,"初始化游戏设置 - 刷新ps5未显示选项");var a=ConfigManager_1.ConfigManager.MenuBaseConfig.GetMenuBaseConfig();if(!a)return;var t=[87,81,85,831,20026,20028,20029,20027,20031];for(const r of a)if(1===r.Ps5Hide&&t.includes(r.FunctionId)){let e=0;switch(r.SetType){case 1:e=r.SliderDefault;break;case 2:case 4:e=r.OptionsDefault;break;default:e=0}GameSettingsManager_1.GameSettingsManager.SetApplySave(r.FunctionId,e)}}LocalStorage_1.LocalStorage.SetGlobal(LocalStorageDefine_1.ELocalStorageGlobalKey.HasLocalGameSettings,!0)}static ENa(){Log_1.Log.CheckDebug()&&Log_1.Log.Debug("GameSettings",64,"InitializeApply[ImageQuality]");var e=this.pnh?.KeyQualityLevel??GameSettingsDeviceRender_1.GameSettingsDeviceRender.GameQualitySettingLevel,a=GameSettingsDeviceRender_1.GameSettingsDeviceRender.GetDeviceReaderFeatureData(e);if(Log_1.Log.CheckInfo()&&Log_1.Log.Info("GameSettings",64,"初始化画质时，获取机型适配表中的参数",["qualityLevel",e],["DeviceRenderFeatureData",a]),a){var t=GameSettingsManager_1.GameSettingsManager.Get(10);if(t){if(t.Set(e,!0),!GameSettingsUtils_1.GameSettingsUtils.PreApplyImageQuality(this.Gh_))return;t.IsInitializeApplied=!0,t.RefreshCurrentValue(),t.Save()}var t=Info_1.Info.IsPcOrGamepadPlatform(),i=GameSettingsManager_1.GameSettingsManager.Get(11)?.HasLocalStorageValue?GameSettingsDeviceRender_1.GameSettingsDeviceRender.GetFrameIndexByList(GameSettingsManager_1.GameSettingsManager.GetCurrentValue(11)):GameSettingsDeviceRender_1.GameSettingsDeviceRender.GetFrameIndexByList(a.FPS),r=(Log_1.Log.CheckDebug()&&Log_1.Log.Debug("GameSettings",64,"[FPSDebug]InitializeApplyImageQuality",["fpsIndex",i],["feature FPS",a.FPS]),GameSettingsManager_1.GameSettingsManager.Get(54)?.HasLocalStorageValue?GameSettingsManager_1.GameSettingsManager.GetCurrentValue(54):this.pnh?.KeyNewShadowQuality??a.ShadowQuality),n=GameSettingsManager_1.GameSettingsManager.Get(55)?.HasLocalStorageValue?GameSettingsManager_1.GameSettingsManager.GetCurrentValue(55):this.pnh?.KeyNiagaraQuality??a.FxQuality,s=GameSettingsManager_1.GameSettingsManager.Get(56)?.HasLocalStorageValue?GameSettingsManager_1.GameSettingsManager.GetCurrentValue(56):this.pnh?.KeyImageDetail??a.ImageDetail,_=GameSettingsManager_1.GameSettingsManager.Get(57)?.HasLocalStorageValue?GameSettingsManager_1.GameSettingsManager.GetCurrentValue(57):this.pnh?.KeyAntiAliasing??a.AntiAliasing,l=GameSettingsManager_1.GameSettingsManager.Get(58)?.HasLocalStorageValue?GameSettingsManager_1.GameSettingsManager.GetCurrentValue(58):this.pnh?.KeySceneAo??a.AO,g=GameSettingsManager_1.GameSettingsManager.Get(63)?.HasLocalStorageValue?GameSettingsManager_1.GameSettingsManager.GetCurrentValue(63):this.pnh?.KeyVolumeFog??a.VolumeFog,o=GameSettingsManager_1.GameSettingsManager.Get(64)?.HasLocalStorageValue?GameSettingsManager_1.GameSettingsManager.GetCurrentValue(64):this.pnh?.KeyVolumeLight??a.VolumeLight,G=GameSettingsManager_1.GameSettingsManager.Get(65)?.HasLocalStorageValue?GameSettingsManager_1.GameSettingsManager.GetCurrentValue(65):this.pnh?.KeyMotionBlur,S=void 0===G?a.MotionBlur:0===G?0:2,G=(Log_1.Log.CheckDebug()&&Log_1.Log.Debug("GameSettings",64,"[FPSDebug]InitializeApplyImageQuality",["oldMotionBlurValue",G],["cfgMotionBlurValue",a.MotionBlur],["motionBlur",S],["currentMotionBlur",GameSettingsManager_1.GameSettingsManager.GetCurrentValue(65)],["NewmotionBlur",LocalStorage_1.LocalStorage.GetGlobal(LocalStorageDefine_1.ELocalStorageGlobalKey.MotionBlur)]),GameSettingsManager_1.GameSettingsManager.Get(66)?.HasLocalStorageValue?GameSettingsManager_1.GameSettingsManager.GetCurrentValue(66):this.pnh?.KeyPcVsync??a.VSync),m=GameSettingsManager_1.GameSettingsManager.Get(67)?.HasLocalStorageValue?GameSettingsManager_1.GameSettingsManager.GetCurrentValue(67):this.pnh?.KeyMobileResolution??a.ScreenPercentage,d=GameSettingsManager_1.GameSettingsManager.Get(132)?.HasLocalStorageValue?GameSettingsManager_1.GameSettingsManager.GetCurrentValue(132):this.pnh?.KeyBloomEnable??a.Bloom,a=GameSettingsManager_1.GameSettingsManager.Get(79)?.HasLocalStorageValue?GameSettingsManager_1.GameSettingsManager.GetCurrentValue(79):this.pnh?.KeyNpcDensity??a.NpcDensity;GameSettingsManager_1.GameSettingsManager.InitSetApplySave(11,i),GameSettingsManager_1.GameSettingsManager.InitSetApplySave(54,r),GameSettingsManager_1.GameSettingsManager.InitSetApplySave(55,n),GameSettingsManager_1.GameSettingsManager.InitSetApplySave(56,s),GameSettingsManager_1.GameSettingsManager.InitSetApplySave(57,_),GameSettingsManager_1.GameSettingsManager.InitSetApplySave(58,l),GameSettingsUtils_1.GameSettingsUtils.ApplySceneLightQuality(e),GameSettingsManager_1.GameSettingsManager.InitSetApplySave(63,g),GameSettingsManager_1.GameSettingsManager.InitSetApplySave(64,o),GameSettingsManager_1.GameSettingsManager.InitSetApplySave(65,S),GameSettingsManager_1.GameSettingsManager.InitSetApplySave(67,m),GameSettingsManager_1.GameSettingsManager.InitSetApplySave(132,d),GameSettingsManager_1.GameSettingsManager.InitSetApplySave(79,a),t&&GameSettingsManager_1.GameSettingsManager.InitSetApplySave(66,G)}}static yNa(){Log_1.Log.CheckDebug()&&Log_1.Log.Debug("GameSettings",64,"InitializeApply[MenuConfig]");var e=ConfigManager_1.ConfigManager.MenuBaseConfig.GetMenuBaseConfig();if(e)for(const t of e)if(MenuTool_1.MenuTool.CheckPlatform(t)){var a=t.FunctionId;if(10===a||137===a)Log_1.Log.CheckDebug()&&Log_1.Log.Debug("GameSettings",64,"相关的已经在前面设置过了，不要在[InitializeApplyMenuConfig]再设置了",["gameSettingsId",a]);else{let e=0;switch(t.SetType){case 1:e=t.SliderDefault;break;case 2:case 4:e=t.OptionsDefault;break;default:e=0}Log_1.Log.CheckDebug()&&Log_1.Log.Debug("GameSettings",64,"最后一部的初始化设值",["gameSettingsId",a],["HasLocalStorageValue",GameSettingsManager_1.GameSettingsManager.Get(a)?.HasLocalStorageValue],["GetCurrentValue",GameSettingsManager_1.GameSettingsManager.GetCurrentValue(a)],["OldDataMigrationDataMap",this.vnh?.get(a)],["defaultValue",e]),e=GameSettingsManager_1.GameSettingsManager.Get(a)?.HasLocalStorageValue?GameSettingsManager_1.GameSettingsManager.GetCurrentValue(a):this.vnh?.get(a)??e,GameSettingsManager_1.GameSettingsManager.InitSetApplySave(a,e)}}}}exports.GameSettingsController=GameSettingsController,(_a=GameSettingsController).IRe=void 0,GameSettingsController.pnh=void 0,GameSettingsController.vnh=void 0,GameSettingsController.hMe=()=>{var e;GameSettingsManager_1.GameSettingsManager.IsGameSettingsAppliedOnOpenLoading?Log_1.Log.CheckInfo()&&Log_1.Log.Info("Render",64,"游戏设置已经初始化应用过"):(Log_1.Log.CheckInfo()&&Log_1.Log.Info("Render",40,"初始化-应用设置参数1111"),Info_1.Info.IsPcPlatform()&&(e=GameSettingsDeviceRender_1.GameSettingsDeviceRender.DeviceType,Log_1.Log.CheckInfo()&&Log_1.Log.Info("Render",40,"重新设置PC性能分级",["deviceType",e]),11===e?(UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.ViewDistanceQuality 0"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.AntiAliasingQuality 1"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.PostProcessQuality 0"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.TextureQuality 2"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.EffectsQuality 1"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.FoliageQuality 0"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"r.LandscapeReverseLODScaleFactor 2")):12===e?(UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.ViewDistanceQuality 1"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.AntiAliasingQuality 2"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.PostProcessQuality 1"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.TextureQuality 2"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.EffectsQuality 2"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.FoliageQuality 1"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"r.LandscapeReverseLODScaleFactor 1")):13===e?(UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.ViewDistanceQuality 2"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.AntiAliasingQuality 2"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.PostProcessQuality 2"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.TextureQuality 2"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.EffectsQuality 3"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.FoliageQuality 2"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"r.CapsuleKuroAO 1"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"r.LandscapeReverseLODScaleFactor 0")):14!==e&&51!==e||(UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.ViewDistanceQuality 3"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.AntiAliasingQuality 3"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.PostProcessQuality 3"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.TextureQuality 3"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.EffectsQuality 3"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.FoliageQuality 3"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"r.CapsuleKuroAO 1"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"r.LandscapeReverseLODScaleFactor 0"))),Info_1.Info.IsPs5Platform()&&(UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.ViewDistanceQuality 2"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.AntiAliasingQuality 2"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.PostProcessQuality 2"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.TextureQuality 2"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.EffectsQuality 3"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"sg.FoliageQuality 2"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"r.CapsuleKuroAO 1"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"r.LandscapeReverseLODScaleFactor 0")),_a.SNa(),EventSystem_1.EventSystem.Emit(EventDefine_1.EEventName.AfterGameSettingsAppliedOnOpenLoading),Info_1.Info.IsPlayInEditor&&UE.KuroEditorUtilityLibrary.GetGConfigEditorSettings("/Script/KuroEditorUtility.KuroEditorUtilitySetting","TopSpeedForLoading")&&(e="wp.Runtime.OverrideMultipleRuntimeGridNames Grid_Near&Grid_Middle&Grid_Middle_Far&Grid_Far&Grid_SuperFar&Grid_SSuperFar&Grid_HLOD_Small&Grid_HLOD_Middle&Grid_HLOD&Grid_HLOD_Volume_Small&Grid_HLOD_Volume_Middle&Grid_HLOD_Volume&Grid_Water&Grid_Impostor&Grid_ISM_Near&Grid_ISM_Middle&Grid_ISM_Far&Grid_ISM_SuperFar&Grid_Foliage_Near&Grid_Foliage_Grass&Grid_Foliage_Middle&Grid_Foliage_Far&Grid_ReverseFar&Grid_SSuperFarReverse&Grid_EnclosedSpaceNear&Grid_EnclosedSpaceMiddle&Grid_EnclosedSpaceFar&Grid_EnclosedSpaceSuperFar&Grid_EnclosedSpaceSSuperFar",UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"wp.Runtime.OverrideMultipleRuntimeGridNames Grid_Near&Grid_Middle&Grid_Middle_Far&Grid_Far&Grid_SuperFar&Grid_SSuperFar&Grid_HLOD_Small&Grid_HLOD_Middle&Grid_HLOD&Grid_HLOD_Volume_Small&Grid_HLOD_Volume_Middle&Grid_HLOD_Volume&Grid_Water&Grid_Impostor&Grid_ISM_Near&Grid_ISM_Middle&Grid_ISM_Far&Grid_ISM_SuperFar&Grid_Foliage_Near&Grid_Foliage_Grass&Grid_Foliage_Middle&Grid_Foliage_Far&Grid_ReverseFar&Grid_SSuperFarReverse&Grid_EnclosedSpaceNear&Grid_EnclosedSpaceMiddle&Grid_EnclosedSpaceFar&Grid_EnclosedSpaceSuperFar&Grid_EnclosedSpaceSSuperFar"),e="wp.Runtime.OverrideMultipleRuntimeGridLoadingRangeValues 50&80&180&100&450&1800&150&200&300&150&200&300&480&250&50&80&100&150&40&80&100&100&300&1800&50&80&100&450&600",UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,e),e="r.Kuro.SkeletalMesh.LODDistanceScale 1.0",UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,e),e="r.Kuro.Foliage.GrassCullDistanceMax 3000",UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,e),e="r.Kuro.MaterialDesktopQualityShoulderRender 0",UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,e),e="r.Kuro.GlobalPointCloudStreamEnabled 0",UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,e),Log_1.Log.CheckInfo())&&Log_1.Log.Info("World",41,"Editor: TopSpeedMode is on."),GameSettingsManager_1.GameSettingsManager.ConvertLocalMenuData(),GameSettingsUtils_1.GameSettingsUtils.CheckLocalCustomImageQuality(),GameSettingsManager_1.GameSettingsManager.ConvertViewSensitivity(),GameSettingsDeviceRender_1.GameSettingsDeviceRender.CancelAllPerformanceLimit(),GameSettingsManager_1.GameSettingsManager.IsGameSettingsAppliedOnOpenLoading=!0)},GameSettingsController._Me=()=>{ModelManager_1.ModelManager.GameModeModel.UseWorldPartition?(Log_1.Log.CheckInfo()&&Log_1.Log.Info("Render",59,"进入大世界-调整渲染参数"),Info_1.Info.IsPcOrGamepadPlatform()||(UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"r.Mobile.EnableKuroSpotlightsShadow 0"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"r.FogVisibilityCulling.Enable 1")),UE.LandscapeProxy.SetKuroLandscapeFOVFactor(-1),UE.StreamableRenderAsset.SetKuroStreamingLevelState(0),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"r.Shadow.CacheWholeSceneShadows 1"),_a.xHe()):(Log_1.Log.CheckInfo()&&Log_1.Log.Info("Render",59,"进入副本-调整渲染参数"),Info_1.Info.IsPcOrGamepadPlatform()||(UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"r.Mobile.EnableKuroSpotlightsShadow 1"),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"r.FogVisibilityCulling.Enable 0")),GameSettingsLevelRender_1.GameSettingsLevelRender.Get().SetLevelRenderSettings(),UE.LandscapeProxy.SetKuroLandscapeFOVFactor(0),UE.StreamableRenderAsset.SetKuroStreamingLevelState(1),_a.xHe(),_a.kot());var e=GameSettingsManager_1.GameSettingsManager.Get(58);e&&e.Apply()},GameSettingsController.uMe=()=>{ModelManager_1.ModelManager.GameModeModel.UseWorldPartition||(Log_1.Log.CheckInfo()&&Log_1.Log.Info("Render",59,"退出副本-调整渲染参数"),GameSettingsLevelRender_1.GameSettingsLevelRender.Get().RevertLevelRenderSetting(),UE.LandscapeProxy.SetKuroLandscapeFOVFactor(-1),UE.StreamableRenderAsset.SetKuroStreamingLevelState(0),UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"r.Shadow.CacheWholeSceneShadows 1"),_a.xHe())},GameSettingsController.XGa=()=>{UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"r.Shadow.CacheWholeSceneShadows 0"),_a.xHe(),_a.kot()},GameSettingsController.q7e=()=>{_a.IRe=void 0,UE.KismetSystemLibrary.ExecuteConsoleCommand(GlobalData_1.GlobalData.World,"r.Shadow.CacheWholeSceneShadows 1")},GameSettingsController.Etl=(e,a)=>{2!==e&&2!==a||GameSettingsUtils_1.GameSettingsUtils.RefreshViewRevertState(a)},GameSettingsController.KRl=e=>{e=e?1:0;GameSettingsManager_1.GameSettingsManager.Set(51101,e),GameSettingsManager_1.GameSettingsManager.RefreshCurrentValue(51101),GameSettingsManager_1.GameSettingsManager.Save(51101)},GameSettingsController.OnGameUserSettingsUINeedsUpdate=()=>{TimerSystem_1.TimerSystem.Next(_a.OnUEGameUserSettingsUpdate)},GameSettingsController.OnUEGameUserSettingsUpdate=()=>{var e=UE.GameUserSettings.GetGameUserSettings(),a=2===e.GetFullscreenMode()?1:0,a=(GameSettingsManager_1.GameSettingsManager.GetEditValue(5)!==a&&(GameSettingsManager_1.GameSettingsManager.Set(5,a),GameSettingsManager_1.GameSettingsManager.RefreshCurrentValue(5),GameSettingsManager_1.GameSettingsManager.Save(5)),GameSettingsManager_1.GameSettingsManager.GetEditValue(6)),e=GameSettingsDeviceRender_1.GameSettingsDeviceRender.GetResolutionIndexByList(e.GetScreenResolution());a!==e&&(GameSettingsManager_1.GameSettingsManager.Set(6,e),GameSettingsManager_1.GameSettingsManager.RefreshCurrentValue(6),GameSettingsManager_1.GameSettingsManager.Save(6))};
//# sourceMappingURL=GameSettingsController.js.map