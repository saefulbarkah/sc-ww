
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ViewHotKeyHandleRoulette=void 0;const Info_1=require("../../../../Core/Common/Info"),CommonParamById_1=require("../../../../Core/Define/ConfigCommon/CommonParamById"),EventDefine_1=require("../../../Common/Event/EventDefine"),EventSystem_1=require("../../../Common/Event/EventSystem"),InputSettingsManager_1=require("../../../InputSettings/InputSettingsManager"),InputDistributeController_1=require("../../InputDistribute/InputDistributeController"),InputMappingsDefine_1=require("../../InputDistribute/InputMappingsDefine"),ViewHotKeyHandle_1=require("../ViewHotKeyHandle");class ViewHotKeyHandleRoulette extends ViewHotKeyHandle_1.ViewHotKeyHandle{constructor(){super(...arguments),this.vXa=!1,this.MXa=!1,this.SXa=!1,this.yXa=0,this.Dut=t=>{this.ActionName&&this.ActionName===t&&this.EXa(this.IXa())},this.TXa=(t,e)=>{this.SXa&&this.vXa&&(e<-this.yXa||e>this.yXa)&&(this.MXa=!0,this.OnInputAction(this.ActionName,0),this.MXa=!1,this.vXa=!1)},this.LXa=(t,e)=>{this.vXa=0===e,this.OnInputAction(t,e)}}Bind(){this.AU(),InputDistributeController_1.InputDistributeController.BindAction(this.ActionName,this.LXa),EventSystem_1.EventSystem.Add(EventDefine_1.EEventName.OnActionKeyChanged,this.Dut)}UnBind(){InputDistributeController_1.InputDistributeController.UnBindAction(this.ActionName,this.LXa),this.SXa&&InputDistributeController_1.InputDistributeController.UnBindAxes([InputMappingsDefine_1.axisMappings.LookUp,InputMappingsDefine_1.axisMappings.Turn],this.TXa),EventSystem_1.EventSystem.Remove(EventDefine_1.EEventName.OnActionKeyChanged,this.Dut)}AU(){this.yXa=CommonParamById_1.configCommonParamById.GetFloatConfig("Roulette_Gamepad_Open_DeadLimit")??0,this.EXa(this.IXa())}IXa(){var t;return!!this.ActionName&&!!(t=InputSettingsManager_1.InputSettingsManager.GetActionBinding(this.ActionName))&&(t.GetGamepadKeyNameList(t=[]),1===t.length)&&InputSettingsManager_1.InputSettingsManager.IsCombinationAxisMainKey(t[0])}EXa(t){t!==this.SXa&&(t?InputDistributeController_1.InputDistributeController.BindAxes([InputMappingsDefine_1.axisMappings.LookUp,InputMappingsDefine_1.axisMappings.Turn],this.TXa):InputDistributeController_1.InputDistributeController.UnBindAxes([InputMappingsDefine_1.axisMappings.LookUp,InputMappingsDefine_1.axisMappings.Turn],this.TXa),this.SXa=t)}SpecialConditionCheck(){return!Info_1.Info.IsInGamepad()||!this.SXa||this.MXa}}exports.ViewHotKeyHandleRoulette=ViewHotKeyHandleRoulette;
//# sourceMappingURL=ViewHotKeyHandleRoulette.js.map