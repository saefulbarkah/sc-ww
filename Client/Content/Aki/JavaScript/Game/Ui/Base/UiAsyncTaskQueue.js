
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UiAsyncTaskQueue=void 0;const Log_1=require("../../../Core/Common/Log"),Queue_1=require("../../../Core/Container/Queue");class UiAsyncTaskQueue{constructor(){this.TaskQueue=void 0,this.qk_=!1,this.Bk_=!1,this.Ok_=void 0}EnQueue(s){this.TaskQueue||(this.TaskQueue=new Queue_1.Queue),this.TaskQueue.Push(s),Log_1.Log.CheckDebug()&&Log_1.Log.Debug("UiAsyncTask",43,"[UiAsyncTask] 添加任务",["TaskName",s.Name],["Status",s.Status])}async ProcessQueue(){if(!this.Bk_&&!this.qk_&&this.TaskQueue&&0!==this.TaskQueue.Size){for(this.qk_=!0;0<this.TaskQueue.Size;)this.Ok_=this.TaskQueue.Pop(),this.Ok_&&(Log_1.Log.CheckDebug()&&Log_1.Log.Debug("UiAsyncTask",43,"[UiAsyncTask] 任务开始执行",["TaskName",this.Ok_.Name],["Status",this.Ok_.Status]),await this.Ok_.Run(),this.Ok_=void 0);this.qk_=!1}}Cancel(){if(this.Bk_=!0,this.Ok_?.Cancel(),this.TaskQueue){for(let s=0;s<this.TaskQueue.Size;s++)this.TaskQueue.Get(s)?.Cancel();this.TaskQueue.Clear()}}}exports.UiAsyncTaskQueue=UiAsyncTaskQueue;
//# sourceMappingURL=UiAsyncTaskQueue.js.map