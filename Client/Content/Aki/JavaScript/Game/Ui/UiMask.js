
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UiMask=void 0;const Log_1=require("../../Core/Common/Log"),TimerSystem_1=require("../../Core/Timer/TimerSystem"),UiLayer_1=require("./UiLayer"),MASK_DESTROY_TIME=2e3;class UiMask{constructor(){this.b5_=new Map}L5_(e){void 0!==e.Timer&&(Log_1.Log.CheckDebug()&&Log_1.Log.Debug("UiMask",10,"[UiMask]移除定时器",["MaskTag",e.Tag],["MaskCount",e.Count]),TimerSystem_1.TimerSystem.Remove(e.Timer),e.Timer=void 0)}w5_(e,i){return Log_1.Log.CheckDebug()&&Log_1.Log.Debug("UiMask",10,"[UiMask]添加定时器",["MaskTag",e],["MaskCount",i]),TimerSystem_1.TimerSystem.Delay(()=>{Log_1.Log.CheckInfo()&&Log_1.Log.Info("UiMask",10,"[UiMask]超过保底时间,定时器执行逻辑,解除遮罩",["MaskTag",e]),this.R5_(e)},MASK_DESTROY_TIME)}A5_(e){e.Timer=this.w5_(e.Tag,e.Count),UiLayer_1.UiLayer.SetShowMaskLayer(e.Tag,!0)}P5_(e){let i=this.b5_.get(e);i?(this.L5_(i),i.Count+=1):(i={Tag:e,Timer:void 0,Count:1},this.b5_.set(e,i)),this.A5_(i)}x5_(e){var i=this.b5_.get(e);i&&(--i.Count,i.Count<=0)&&(this.L5_(i),this.R5_(e))}R5_(e){this.b5_.delete(e),UiLayer_1.UiLayer.SetShowMaskLayer(e,!1)}SetMask(e,i){i?this.P5_(e):this.x5_(e)}}exports.UiMask=UiMask;
//# sourceMappingURL=UiMask.js.map