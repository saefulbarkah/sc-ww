
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UiMask=void 0;const Log_1=require("../../Core/Common/Log"),TimerSystem_1=require("../../Core/Timer/TimerSystem"),UiLayer_1=require("./UiLayer"),MASK_DESTROY_TIME=2e3;class UiMask{constructor(){this.Y5_=new Map}z5_(e){void 0!==e.Timer&&(Log_1.Log.CheckDebug()&&Log_1.Log.Debug("UiMask",10,"[UiMask]移除定时器",["MaskTag",e.Tag],["MaskCount",e.Count]),TimerSystem_1.TimerSystem.Remove(e.Timer),e.Timer=void 0)}J5_(e,i){return Log_1.Log.CheckDebug()&&Log_1.Log.Debug("UiMask",10,"[UiMask]添加定时器",["MaskTag",e],["MaskCount",i]),TimerSystem_1.TimerSystem.Delay(()=>{Log_1.Log.CheckInfo()&&Log_1.Log.Info("UiMask",10,"[UiMask]超过保底时间,定时器执行逻辑,解除遮罩",["MaskTag",e]),this.Z5_(e)},MASK_DESTROY_TIME)}e8_(e){e.Timer=this.J5_(e.Tag,e.Count),UiLayer_1.UiLayer.SetShowMaskLayer(e.Tag,!0)}t8_(e){let i=this.Y5_.get(e);i?(this.z5_(i),i.Count+=1):(i={Tag:e,Timer:void 0,Count:1},this.Y5_.set(e,i)),this.e8_(i)}i8_(e){var i=this.Y5_.get(e);i&&(--i.Count,i.Count<=0)&&(this.z5_(i),this.Z5_(e))}Z5_(e){this.Y5_.delete(e),UiLayer_1.UiLayer.SetShowMaskLayer(e,!1)}SetMask(e,i){i?this.t8_(e):this.i8_(e)}}exports.UiMask=UiMask;
//# sourceMappingURL=UiMask.js.map